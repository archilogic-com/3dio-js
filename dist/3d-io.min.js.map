{"version":3,"sources":["../src/core/runtime.js","../src/utils/io/request/basic.js","../src/utils/io/request/json.js","../src/utils/io/request/texture.js","../src/utils/io/request/dds-texture.js","../src/utils/io/request.js","../src/aframe/three/data3d-view/load-textures.js","../src/aframe/three/data3d-view/set-material.js","../src/aframe/three/data3d-view/wireframe.js","../src/aframe/three/data3d-view.js","../node_modules/bluebird/js/release/util.js","../node_modules/bluebird/js/release/queue.js","../node_modules/bluebird/js/release/async.js","../node_modules/bluebird/js/release/errors.js","../node_modules/bluebird/js/release/nodeback.js","../node_modules/bluebird/js/release/bluebird.js","../src/utils/services/json-rpc2-client.js","../src/utils/services/call.js","../src/utils/get-mime-type-from-filename.js","../src/storage/put.js","../src/aframe/ui/create-file-drop.js","../src/utils/path.js","../src/utils/url.js","../src/utils/data3d/decode-buffer.js","../src/utils/data3d/load.js","../src/storage/get.js","../src/furniture/get.js","../node_modules/bluebird/js/browser/bluebird.js","../src/core/polyfills.js","../node_modules/whatwg-fetch/fetch.js","../node_modules/js-logger/src/logger.js","../src/core/bootstrap.js","../src/core.js","../node_modules/bluebird/js/release/es5.js","../node_modules/bluebird/js/release/schedule.js","../node_modules/bluebird/js/release/thenables.js","../node_modules/bluebird/js/release/promise_array.js","../node_modules/bluebird/js/release/context.js","../node_modules/bluebird/js/release/debuggability.js","../node_modules/bluebird/js/release/catch_filter.js","../node_modules/bluebird/js/release/finally.js","../node_modules/bluebird/js/release/method.js","../node_modules/bluebird/js/release/bind.js","../node_modules/bluebird/js/release/cancel.js","../node_modules/bluebird/js/release/direct_resolve.js","../node_modules/bluebird/js/release/synchronous_inspection.js","../node_modules/bluebird/js/release/join.js","../node_modules/bluebird/js/release/map.js","../node_modules/bluebird/js/release/call_get.js","../node_modules/bluebird/js/release/using.js","../node_modules/bluebird/js/release/timers.js","../node_modules/bluebird/js/release/generators.js","../node_modules/bluebird/js/release/nodeify.js","../node_modules/bluebird/js/release/promisify.js","../node_modules/bluebird/js/release/props.js","../node_modules/bluebird/js/release/race.js","../node_modules/bluebird/js/release/reduce.js","../node_modules/bluebird/js/release/settle.js","../node_modules/bluebird/js/release/some.js","../node_modules/bluebird/js/release/filter.js","../node_modules/bluebird/js/release/each.js","../node_modules/bluebird/js/release/any.js","../node_modules/bluebird/js/release/promise.js","../src/utils/io/form-data.js","../src/utils/io/fetch.js","../src/utils/uuid.js","../src/aframe.js","../src/furniture.js","../src/storage.js","../src/3d-io.js"],"names":["getWebGlInfo","canvas","document","createElement","gl","getContext","antialias","debugInfo","getExtension","supportsDds","shadingLanguageVersion","getParameter","SHADING_LANGUAGE_VERSION","renderer","RENDERER","vendor","VENDOR","unmaskedRenderer","UNMASKED_RENDERER_WEBGL","unmaskedVendor","UNMASKED_VENDOR_WEBGL","maxTextureSize","MAX_TEXTURE_SIZE","maxRenderbufferSize","MAX_RENDERBUFFER_SIZE","detectMobile","hint","navigator","userAgent","window","opera","test","substr","sendBasicRequest","url","method","type","body","Promise","resolve","reject","xhr","XMLHttpRequest","onload","event","status","response","onerror","open","crossOrigin","responseType","toLowerCase","send","sendJsonRequest","data","jsonString","triedPreflightWorkaround","JSON","stringify","e","json","parse","responseText","message","headers","getAllResponseHeaders","setRequestHeader","checkPowerOfTwo","value","nearestPowerOfTwoOrMaxTextureSize","n","l","Math","log","LN2","pow","round","resizeImage","image","width","height","drawImage","console","sendTextureRequest","dataType","progress","s3Key","texture","THREE","Texture","sourceFile","isPowerOfTwo","isNotTooBig","src","triedWithCacheBust","indexOf","Date","getTime","fourCCToInt32","charCodeAt","int32ToFourCC","String","fromCharCode","loadARGBMip","buffer","dataOffset","dataLength","srcBuffer","Uint8Array","byteArray","dst","y","x","b","g","r","a","loadMipmaps","dds","mipmaps","format","mipmapCount","header","Int32Array","DDS_MAGIC","error","DDPF_FOURCC","blockBytes","fourCC","isRGBAUncompressed","FOURCC_DXT1","RGB_S3TC_DXT1_Format","FOURCC_DXT3","RGBA_S3TC_DXT3_Format","FOURCC_DXT5","RGBA_S3TC_DXT5_Format","RGBAFormat","DDSD_MIPMAPCOUNT","max","isCubemap","DDSCAPS2_CUBEMAP","faces","face","i","length","mipmap","push","log2","sendDdsTextureRequest","name","CompressedTexture","bufferByteLength","byteLength","generateMipmaps","request","args","uri","getType","sendRequestByType","split","pop","getTextureTypeFromUrl","FormData","_","isObject","dataTypeFromUrl","extension","urlLow","typeByExtensionKeys","substring","typeByExtension","isTexture","search","match","textureTypeByExtension","onError","countTextureReference","key","undefined","textureRefCount","disposeIfPossible","texture3d","this","dispose","loadTextures","queue","TEXTURE_TYPES","vm","_attributes","material3d","mesh3d","resetTexturesOnLoadStart","textureS3Key","textureType3d","textureType","needsUpdate","texture3dKeys","textureKeys","texturePromises","textureCount","hasUv1Textures","geometry3d","geometry","attributes3d","attributes","hasUvVertices","uv","count","hasUv2Vertices","uv2","UV1","THREEJS_TEXTURE_TYPES_MAP","wrap","WEBGL_WRAP_TYPES","wrapS","wrapT","getTexture","catch","size","targetScaleU","targetScaleV","currentScaleU","_scaleU","currentScaleV","_scaleV","_source","array","sourceUVs","resizedUVs","Float32Array","UV2","promise","all","then","textures","anisotropy","buffersNeedUpdate","uvsNeedUpdate","viewport","render","setMaterial","reset","loadingQueuePrefix","onFirstTextureSetLoaded","shininess","specularCoef","colorDiffuse","color","mapDiffuse","colorSpecular","specular","Color","colorEmissive","emissive","mapLight","mapLightPreview","enhancedLightMap","intensity","mapLightIntensity","center","mapLightCenter","falloff","mapLightFalloff","boundingBox","computeBoundingBox","position","min","clone","applyMatrix4","matrixWorld","meshIsFlat","meshIsOnGroundLevel","castShadow","castRealTimeShadows","receiveShadow","receiveRealTimeShadows","material","_texturesToBeLoaded","mapSpecular","mapNormal","mapAlpha","mapDiffusePreview","mapSpecularPreview","mapNormalPreview","mapAlphaPreview","loadingTexturesPromise","loadingQueue","isLoadingLoResTextures","hasLoResTextures","hiResTexturesEnabled","runtime","isMobile","webGl","firstTextureLoaded","LO_RES_TEXTURE_TYPES","HI_RES_TEXTURE_TYPES","opacity","transparent","Wireframe","_wireframeGeometry","BufferGeometry","addAttribute","BufferAttribute","_wireframeMaterial","LineBasicMaterial","_positions","_buffer","_thresholdAngle","_thickness","_color","_opacity","Line","call","LinePieces","Data3dView","options","threeParent","parent","meshKeys","meshes","materialKeys","materials","_meshes3d","_wireframes3d","_materials3d","createOrReuseGeometry3d","geometry3dCache","refCount","disposeGeometry3dIfNotUsedElsewhere","tryCatcher","target","tryCatchTarget","apply","arguments","errorObj","tryCatch","fn","isPrimitive","val","maybeWrapAsError","maybeError","Error","safeToString","withAppended","appendee","len","ret","Array","getDataPropertyOrDefault","obj","defaultValue","es5","isES5","hasOwnProperty","desc","Object","getOwnPropertyDescriptor","get","set","notEnumerableProp","descriptor","configurable","enumerable","writable","defineProperty","thrower","isClass","keys","names","prototype","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","toFastProperties","FakeConstructor","isIdentifier","str","rident","filledRange","prefix","suffix","isError","markAsOriginatingFromRejection","ignore","originatesFromRejection","OperationalError","canAttachTrace","propertyIsWritable","classString","toString","copyDescriptors","from","to","filter","getDescriptor","env","hasEnvVariables","process","getNativePromise","domainBind","self","cb","bind","arrayMove","srcIndex","dstIndex","j","Queue","capacity","_capacity","_length","_front","Async","_customScheduler","_isTickUsed","_lateQueue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","AsyncInvokeLater","receiver","arg","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","subError","nameProperty","defaultMessage","SubError","captureStackTrace","constructor","inherits","cause","stack","isUntypedError","getPrototypeOf","wrapAsOperationalError","rErrorKey","util","nodebackForPromise","multiArgs","err","wrapped","_attachExtraTrace","_reject","$_len","$_i","_fulfill","noConflict","bluebird","old","JsonRpc2Client","_openRequests","_closedRequestIds","callService","methodName","params","rpcRequest","rpcClient","createRequest","sendHttpRequest","fetch","DEFAULT_API_URL","Content-Type","Accept","handleResponse","cancel","getMimeTypeFromFileName","filename","result","FALLBACK_MIME_TYPE","EXTENSION_TO_MIME_TYPE","putToStore","files","isArray","totalSize_","progress_","onProgress_","onProgress","map","file","putSingleFileToStore","total","reduce","fileName","callServices","contentLength","contentType","credentials","fd","append","AWSAccessKeyId","acl","policy","signature","contentEncoding","isBrowser","getKeyFromS3Response","upload","addEventListener","loaded","res","text","s","exec","createFileDrop","dragEnter","doNothing","THEME","theme","el","setAttribute","over","dragLeave","box","drop","getFilesFromDragAndDropEvent","onDrop","elementId","getElementById","dataTransfer","dropEffect","stopPropagation","preventDefault","warningCallback","onWarning","originalEvent","items","getFlatFileArrayFromItems","removeRootDir","filterValidFiles","_file","Blob","item","entries","webkitGetAsEntry","getAsFile","recursivelyParseEntries","resultArray","entry","isFile","fullPath","File","isDirectory","createReader","readEntries","_entries","_files","filteredFiles","EXTENSION_WHITE_LIST","rootDir","parsePath","path","TypeError","allParts","splitPathRe","slice","root","dir","base","ext","Url","_protocol","_href","_port","_query","auth","slashes","host","hostname","hash","pathname","_prependSlash","_escapePath","replace","encodeURIComponent","_escapeSearch","containsCharacter","string","char1","fromIndex","stopCharacterTable","ch","containsCharacter2","char2","makeAsciiTable","spec","forEach","start","end","decodeBuffer","parsedUrl","urlUtil","pathUtil","origin","protocol","Buffer","byteOffset","headerArray","HEADER_BYTE_LENGTH","magicNumber","version","structureByteLength","payloadByteLength","expectedFileByteLength","MAGIC_NUMBER","VERSION","errorMessage","structure","structureArray","Uint16Array","structureString","textDecoder","decode","payloadByteOffset","traverseData3d","data3d","mapArraysToBuffer","convertTextureKeys","makeUtf16Decoder","l20","l2","i2","m","texturePathKey","TEXTURE_PATH_KEYS","mesh","positionsOffset","positionsLength","positions","normalsOffset","normalsLength","normals","uvsOffset","uvsLength","uvs","uvsLightmapOffset","uvsLightmapLength","uvsLightmap","cacheKey","callback","children","loadData3d","arrayBuffer","getFromStore","convertKeyToUrl","cdn","encode","processedKey","startsWithSlash","CDN_DOMAIN","BUCKET","getProduct","id","productInfo","fileKey","isNode","module","exports","title","webGlInfo","isDebugMode","has","define","t","o","u","_dereq_","f","code","1","any","promises","SomePromiseArray","setHowMany","setUnwrap","init","_SomePromiseArray","2","firstLineError","setScheduler","prev","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","stderr","write","exit","throwLater","setTimeout","invokeLater","invoke","settlePromises","_settlePromises","_drainQueue","shift","_reset","./queue","./schedule","./util","3","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","bindingRejected","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","_setOnCancel","_boundTo","_isBound","4","./promise","5","cr","create","callerCache","getterCache","ensureMethod","caller","namedGetter","indexedGetter","index","canEvaluate","propertyName","getter","maybeGetter","getGetter","6","PromiseArray","apiRejection","async","_async","cancellation","_warn","child","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","catchFilter","instances","boundTo","predicateLoop","matchesPredicate","getKeys","./es5","8","Context","_trace","CapturedTrace","peekContext","createContext","longStackTraces","lastIndex","contextStack","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","generatePromiseLifecycleEventObject","defaultFireEvent","cancellationExecute","executor","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","bindingPropagateFrom","isFulfilled","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","ignoreSelf","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","join","checkForgottenReturns","returnValue","promiseCreated","wForgottenReturn","_returnedNonUndefined","handlerLine","creatorLine","traceLines","cleanStack","line","nodeFramePattern","lineMatches","parseLinePattern","firstUserLine","msg","deprecated","replacement","warn","shouldUseOwnTrace","config","warnings","warning","Warning","activeFireEvent","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","charAt","stackFramesAsArray","isSoft","formatStack","printWarning","fireRejectionEvent","localHandler","reason","localEventFired","formatNonError","snip","maxChars","longStackTracesIsSupported","parseLineInfo","matches","parseLineInfoRegex","parseInt","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","bluebirdFramePattern","info","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","getDomain","_getDomain","debugging","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_isRejectionUnhandled","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","onPossiblyUnhandledRejection","domain","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","global","dispatchEvent","domEvent","detail","cancelable","Event","createEvent","initCustomEvent","fireGlobalEvent","emit","eventToObjectGenerator","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","opts","warningsOption","_clearCancellationData","_execute","monitoring","_fireEvent","handler","nodes","stackToIndex","node","cycleEdgeNode","currentChildLength","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","hasStackAfterThrow","isTTY","./errors","10","returner","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","promiseAllThis","PromiseAll","PromiseMapSeries","PromiseReduce","each","mapSeries","12","_TypeError","_RangeError","Objectfreeze","freeze","CancellationError","TimeoutError","AggregateError","RangeError","methods","level","indent","lines","errorTypes","RejectionError","13","getOwnPropertyNames","prop","proto","ObjectKeys","ObjectGetDescriptor","ObjectDefineProperty","ObjectFreeze","ObjectGetPrototypeOf","ArrayIsArray","14","PromiseMap","15","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","lastly","tap","tapCatch","handlerOrPredicate","catchInstances","./catch_filter","16","Proxyable","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","_isResolved","_cleanup","_promiseCancelled","coroutine","returnSentinel","_continue","_promiseFulfilled","next","_promiseRejected","_run","_rejectCallback","done","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","last","spread","18","MappingPromiseArray","limit","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","isFinite","_init$","_init","values","_values","preservedValues","_totalResolved","_resolve","booleans","19","_resolveFromSyncValue","attempt","20","21","spreadAdapter","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","22","check","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","v","deferReject","fillTypes","p","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","errors","APPLY","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","pending","c","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","toResolutionValue","Map","resolveValueIfEmpty","asArray","_iterate","_resolveEmptyArray","getActualLength","shouldCopyValues","isResolved","24","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","inheritedDataKeys","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","__","promisified","THIS","defaultThis","promisifyAll","promisifier","RegExp","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","noCopyProps","makeNodePromisifiedEval","25","PropertiesPromiseArray","isMap","Es6Map","mapToEntries","_isMap","props","castValue","extractEntry","entriesToMap","keyOffset","26","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","27","race","raceLater","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","noAsyncScheduler","NativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","isRecentNode","nativePromise","standalone","cordova","div","toggleScheduled","div2","classList","toggle","observe","scheduleToggle","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","_howMany","_unwrap","_initialized","some","howMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","getThen","isAnyBluebirdPromise","doThenable","doGetThen","hasProp","34","HandleWrapper","handle","successClear","clearTimeout","failureClear","afterValue","delay","ms","afterTimeout","timeout","handleWrapper","35","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","resources","iterator","tryDispose","Disposer","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","resource","doDispose","_unsetDisposable","d","using","input","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","globalObject","Child","Parent","T","excludedPrototypes","Function","isExcludedProto","visitedKeys","enumeration","Symbol","ArrayFrom","itResult","it","chrome","loadTimes","versions","Number","P","normalizeName","normalizeValue","iteratorFor","support","iterable","Headers","consumed","bodyUsed","fileReaderReady","reader","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","chars","bufferClone","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","formData","_bodyFormData","searchParams","URLSearchParams","isDataView","_bodyArrayBuffer","ArrayBuffer","isArrayBufferView","normalizeMethod","upcased","toUpperCase","Request","mode","referrer","form","trim","bytes","decodeURIComponent","parseHeaders","rawHeaders","parts","Response","bodyInit","ok","statusText","viewClasses","DataView","isView","oldValue","redirectStatuses","redirect","location","responseURL","ontimeout","withCredentials","polyfill","time","timeEnd","timers","EPSILON","isInteger","floor","sign","assign","output","source","nextKey","Logger","logHandler","contextualLoggersByNameMap","scope","func","merge","defineLogLevel","DEBUG","INFO","TIME","WARN","ERROR","OFF","ContextualLogger","defaultContext","setLevel","filterLevel","newLevel","enabledFor","lvl","label","msgArgs","globalLogger","L","setHandler","createDefaultHandler","formatter","messages","unshift","timerStartTimeByLabelMap","invokeConsoleMethod","hdlr","timerLabel","useDefaults","defaultLevel","_prevLogger","homepage","require","core","imageTexture","ddsTexture","txt",".dds",".jpg",".jpeg",".jpe",".png",".gif",".svg","repeat","mirror","clamp","update","thresholdAngle","thickness","visible","compareArrays","newBuffer","linewidth","destroy","WEBGL_SIDE","back","both","DEG_TO_RAD","PI","meshId","materialId","wireframe3d","uvs2","scale","rotRad","rotDeg","MeshPhongMaterial","side","Mesh","userData","add","rotation","webglView","modelBoundingBoxNeedsUpdate","computeBoundingSphere","normal","attributesKeys","wireframeThickness","wireframeThresholdAngle","wireframeColor","wireframeOpacity","remove","specularMap","normalMap","alphaMap","lightMap","materialPromises","isDestroyed","hasMeshes","setMeshes","setMaterials","schedule_1","firstLineError_1","thenables","require$$0","promise_array","debuggability","require$$1","catch_filter","_finally","direct_resolve","synchronous_inspection","holderClasses","thenCallbacks","promiseSetters","assignment","cancellationCode","passedArguments","holder","HolderClass","callbacks","asyncNeeded","call_get","getMethodCaller","makeMethodCaller","makeGetter","getCompiled","compiler","cache","maybeCaller","timers$1","generators","require$$2","switchCaseArgumentOrder","likelyArgumentCount","argumentSequence","argumentCount","parameterDeclaration","parameterCount","originalName","generateCallForArgumentCount","comma","shouldProxyThis","newParameterCount","argumentOrder","getFunctionCode","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","require$$17","require$$18","require$$19","require$$20","require$$21","require$$22","require$$23","require$$24","require$$25","require$$26","require$$27","require$$28","require$$29","require$$30","require$$31","bluebird_1","FormData_","FormData$1","fetch$1","PATTERN","uuid","generate","now","random","validate","_handleError","additionalInfo","_closeRequest","timestamp","jsonrpc","finally","dwg","dxf","jpg","jpeg","png","gif","svg","html","htm","js","md","csv","gz","gzip","zip","pdf","3ds","bright","dark","aframe","three","ui","parseQueryString","hostDenotesSlash","disableAutoEscapeChars","_parseProtocol","_parseHost","slashProtocols","_parsePath","_parseQuery","_parseHash","_slashProtocols","query","queryString","relative","resolveObject","port","scheme","q","escapePathName","escapeSearch","_clone","href","_copyPropsTo","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","hasTrailingSlash","up","isAbsolute","_escapePathName","doLowerCase","protocolCharacters","_protocolCharacters","_parseAuth","_parsePort","hadChars","validPort","slashesDenoteHost","hostEndingCharacters","_hostEndingCharacters","first","second","hostNameStart","hostNameEnd","portLength","charsAfterDot","authNeedsDecoding","_noPrependSlashHostEnders","noProtocol","_getComponentEscaped","isAfterQuery","cur","autoEscapeMap","_afterQueryAutoEscapeMap","_autoEscapeMap","escaped","pathStart","pathEnd","escape","autoEscapeCharacters","_autoEscapeCharacters","prePath","queryStart","queryEnd","autoEscape","esc","afterQueryAutoEscapeMap","http","https","gopher","ftp","http:","https:","gopher:","file:","ftp:","TextDecoder","furniture","storage","put","IO3D","aFrame"],"mappings":"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","sourcesContent":["var isNode = !!(\n  // detect node environment\n  typeof module !== 'undefined'\n  && module.exports\n  && typeof process !== 'undefined'\n  && Object.prototype.toString.call(process) === '[object process]'\n  && process.title.indexOf('node') !== -1\n)\nvar isBrowser = !isNode && typeof window !== 'undefined'\nvar webGlInfo = getWebGlInfo()\n\n// create runtime object\n\nvar runtime = {\n\n  isDebugMode: false,\n  isMobile: detectMobile(),\n  isNode: isNode,\n  isBrowser: isBrowser,\n\n  has: {\n    webGl: !!webGlInfo\n  },\n\n  webGl: webGlInfo\n\n}\n\nexport default runtime\n\n// helpers\n\nfunction getWebGlInfo () {\n\n  var canvas = typeof document !== 'undefined' ? document.createElement('canvas') : null\n  if (!canvas) return null\n\n  var gl = canvas.getContext('webgl') ||\n    canvas.getContext('experimental-webgl') ||\n    canvas.getContext('webgl', {antialias: false}) ||\n    canvas.getContext('experimental-webgl', {antialias: false})\n  if (!gl) return null\n\n  var debugInfo = gl.getExtension( 'WEBGL_debug_renderer_info' )\n  var supportsDds = gl.getExtension('WEBGL_compressed_texture_s3tc')\n\n  return {\n    shadingLanguageVersion: gl.getParameter( gl.SHADING_LANGUAGE_VERSION ),\n    renderer: gl.getParameter( gl.RENDERER ),\n    vendor: gl.getParameter( gl.VENDOR ),\n    unmaskedRenderer: debugInfo && gl.getParameter( debugInfo.UNMASKED_RENDERER_WEBGL ),\n    unmaskedVendor: debugInfo && gl.getParameter( debugInfo.UNMASKED_VENDOR_WEBGL ),\n    maxTextureSize: gl.getParameter( gl.MAX_TEXTURE_SIZE ),\n    maxRenderbufferSize: gl.getParameter( gl.MAX_RENDERBUFFER_SIZE ),\n    supportsDds: !!supportsDds\n  }\n\n}\n\nfunction detectMobile () {\n  var hint\n  if (typeof navigator !== 'undefined' && (navigator.userAgent || navigator.vendor)) {\n    hint = navigator.userAgent || navigator.vendor\n  } else if (typeof window !== 'undefined' && window.opera) {\n    hint = window.opera\n  } else {\n    return false\n  }\n  return /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(hint)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(hint.substr(0,4))\n}","export default function sendBasicRequest (url, method, type, body){\n  return new Promise(function (resolve, reject) {\n\n    var xhr = new XMLHttpRequest()\n    xhr.onload = function (event) {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        resolve(xhr.response)\n      } else {\n        reject('Http request to '+url+' returned status: '+xhr.status+'. Body:\\n'+xhr.response)\n      }\n    }\n    xhr.onerror = function (event) {\n      reject('Http request error. URL: '+url)\n    }\n    xhr.open(method, url, true)\n    xhr.crossOrigin = 'Anonymous'\n    xhr.responseType = type.toLowerCase()\n    xhr.send(body)\n\n  })\n}","export default function sendJsonRequest(url, method, type, data){\n  return new Promise(function (resolve, reject) {\n\n    // internals\n    var jsonString = null\n    var triedPreflightWorkaround = false\n\n    // preprocess data\n    if (data) {\n      try {\n        jsonString = JSON.stringify(data)\n      } catch (e) {\n        reject('Error creating JSON string.')\n      }\n    }\n\n    // create request\n    var xhr = new XMLHttpRequest()\n    xhr.crossOrigin = 'Anonymous'\n\n    xhr.onload = function (event) {\n      // parse data\n      var json\n      try {\n        json = JSON.parse(xhr.responseText)\n      } catch (e) {\n        reject({\n          message: 'Http Request failed: Error parsing response JSON',\n          url: url,\n          status: xhr.status,\n          headers: xhr.getAllResponseHeaders(),\n          event: event\n        })\n        return\n      }\n      if (xhr.status >= 200 && xhr.status < 300) {\n        resolve(json)\n      } else {\n        reject(json)\n      }\n    }\n    xhr.onerror = function (event) {\n\n      // When CORS preflight fails then xhr.status is 0\n      if (!triedPreflightWorkaround && xhr.status === 0) {\n\n        // try again with simple header to avoid OPTIONS preflight\n        triedPreflightWorkaround = true\n        xhr.open(method, url, true)\n        xhr.setRequestHeader('Content-Type', 'text/plain')\n        xhr.send(jsonString)\n\n      } else {\n\n        reject({\n          message: 'Http Request error',\n          url: url,\n          status: xhr.status,\n          headers: xhr.getAllResponseHeaders(),\n          event: event\n        })\n\n      }\n\n    }\n\n    xhr.open(method, url, true)\n      if (method !== 'GET') {\n          xhr.setRequestHeader('Content-Type', 'application/json')\n      }\n    xhr.send(jsonString)\n    \n  })\n}","import runtime from '../../../core/runtime.js'\n\n// internals\n\n// graphic card max supported texture size\nvar MAX_TEXTURE_SIZE = runtime.has.webGl ? runtime.webGl.maxTextureSize || 2048 : 2048\n\n// helpers\n\nfunction checkPowerOfTwo (value) {\n  return ( value & ( value - 1 ) ) === 0 && value !== 0\n}\n\nfunction nearestPowerOfTwoOrMaxTextureSize (n) {\n  // max texture size supported by vga\n    if (n > MAX_TEXTURE_SIZE) {\n        return MAX_TEXTURE_SIZE\n    }\n  // next best power of two\n  var l = Math.log(n) / Math.LN2;\n  return Math.pow(2, Math.round(l))\n}\n\nfunction resizeImage (image, url) {\n\n  var width = nearestPowerOfTwoOrMaxTextureSize(image.width)\n  var height = nearestPowerOfTwoOrMaxTextureSize(image.height)\n\n  var canvas = document.createElement('canvas')\n  canvas.width = width\n  canvas.height = height\n  canvas.getContext('2d').drawImage(image, 0, 0, width, height)\n\n  console.log('Image size not compatible. Image has been resized from ' + image.width + 'x' + image.height + 'px to ' + canvas.width + 'x' + canvas.height +\n  'px.\\n' + url)\n\n  return canvas\n}\n\n// function\n\nexport default function sendTextureRequest (url, type, dataType, data, progress, s3Key) {\n  return new Promise(function (resolve, reject) {\n    \n    var image = document.createElement('img')\n    image.crossOrigin = 'Anonymous'\n\n    image.onload = function () {\n      \n      var texture = new THREE.Texture()\n\n      texture.sourceFile = url\n      texture.url = url\n\n      // image size compatibility check\n\n      var isPowerOfTwo = (checkPowerOfTwo(image.width) && checkPowerOfTwo(image.height))\n      var isNotTooBig = (image.width <= MAX_TEXTURE_SIZE && image.height <= MAX_TEXTURE_SIZE)\n\n      if (isPowerOfTwo && isNotTooBig) {\n\n        // use image as it is\n        texture.image = image\n\n      } else {\n\n        // resize image to make it compatible\n        texture.image = resizeImage(image, url)\n        // add url reference\n        texture.image.src = url\n\n      }\n      \n      resolve(texture)\n\n    }\n\n    var triedWithCacheBust = false\n    image.onerror = function () {\n      if(triedWithCacheBust) {\n        reject('Error loading texture ' + url)\n      } else {\n        // try again with cache busting to avoid things like #1510\n        triedWithCacheBust = true\n        if (url.indexOf('?') === -1) {\n          url += '?cacheBust=' + new Date().getTime()\n        } else {\n          url += '&cacheBust=' + new Date().getTime()\n        }\n        image.src = url\n      }\n    }\n\n    // initiate image loading\n    image.src = url\n\n  })\n}","var DDS_MAGIC = 0x20534444;\n\nvar DDSD_CAPS = 0x1,\n  DDSD_HEIGHT = 0x2,\n  DDSD_WIDTH = 0x4,\n  DDSD_PITCH = 0x8,\n  DDSD_PIXELFORMAT = 0x1000,\n  DDSD_MIPMAPCOUNT = 0x20000,\n  DDSD_LINEARSIZE = 0x80000,\n  DDSD_DEPTH = 0x800000;\n\nvar DDSCAPS_COMPLEX = 0x8,\n  DDSCAPS_MIPMAP = 0x400000,\n  DDSCAPS_TEXTURE = 0x1000;\n\nvar DDSCAPS2_CUBEMAP = 0x200,\n  DDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\n  DDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\n  DDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\n  DDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\n  DDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\n  DDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\n  DDSCAPS2_VOLUME = 0x200000;\n\nvar DDPF_ALPHAPIXELS = 0x1,\n  DDPF_ALPHA = 0x2,\n  DDPF_FOURCC = 0x4,\n  DDPF_RGB = 0x40,\n  DDPF_YUV = 0x200,\n  DDPF_LUMINANCE = 0x20000;\n\n// internals\n\nvar FOURCC_DXT1 = fourCCToInt32(\"DXT1\");\nvar FOURCC_DXT3 = fourCCToInt32(\"DXT3\");\nvar FOURCC_DXT5 = fourCCToInt32(\"DXT5\");\n\n// functions\n\nfunction fourCCToInt32 (value) {\n\n  return value.charCodeAt(0) +\n    (value.charCodeAt(1) << 8) +\n    (value.charCodeAt(2) << 16) +\n    (value.charCodeAt(3) << 24);\n\n}\n\nfunction int32ToFourCC (value) {\n\n  return String.fromCharCode(\n    value & 0xff,\n    (value >> 8) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 24) & 0xff\n  );\n}\n\nfunction loadARGBMip (buffer, dataOffset, width, height) {\n  var dataLength = width * height * 4;\n  var srcBuffer = new Uint8Array(buffer, dataOffset, dataLength);\n  var byteArray = new Uint8Array(dataLength);\n  var dst = 0;\n  var src = 0;\n  for (var y = 0; y < height; y++) {\n    for (var x = 0; x < width; x++) {\n      var b = srcBuffer[ src ];\n      src++;\n      var g = srcBuffer[ src ];\n      src++;\n      var r = srcBuffer[ src ];\n      src++;\n      var a = srcBuffer[ src ];\n      src++;\n      byteArray[ dst ] = r;\n      dst++;  //r\n      byteArray[ dst ] = g;\n      dst++;  //g\n      byteArray[ dst ] = b;\n      dst++;  //b\n      byteArray[ dst ] = a;\n      dst++;  //a\n    }\n  }\n  return byteArray;\n}\n\nfunction parse (buffer, loadMipmaps) {\n\n  var dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\n\n  var headerLengthInt = 31; // The header length in 32 bit ints\n\n  // Offsets into the header array\n\n  var off_magic = 0;\n\n  var off_size = 1;\n  var off_flags = 2;\n  var off_height = 3;\n  var off_width = 4;\n\n  var off_mipmapCount = 7;\n\n  var off_pfFlags = 20;\n  var off_pfFourCC = 21;\n  var off_RGBBitCount = 22;\n  var off_RBitMask = 23;\n  var off_GBitMask = 24;\n  var off_BBitMask = 25;\n  var off_ABitMask = 26;\n\n  var off_caps = 27;\n  var off_caps2 = 28;\n  var off_caps3 = 29;\n  var off_caps4 = 30;\n\n  // Parse header\n\n  var header = new Int32Array(buffer, 0, headerLengthInt);\n\n  if (header[ off_magic ] !== DDS_MAGIC) {\n\n    console.error('THREE.DDSLoader.parse: Invalid magic number in DDS header.');\n    return dds;\n\n  }\n\n  if (!header[ off_pfFlags ] & DDPF_FOURCC) {\n\n    console.error('THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code.');\n    return dds;\n\n  }\n\n  var blockBytes;\n\n  var fourCC = header[ off_pfFourCC ];\n\n  var isRGBAUncompressed = false;\n\n  switch (fourCC) {\n\n    case FOURCC_DXT1:\n\n      blockBytes = 8;\n      dds.format = THREE.RGB_S3TC_DXT1_Format;\n      break;\n\n    case FOURCC_DXT3:\n\n      blockBytes = 16;\n      dds.format = THREE.RGBA_S3TC_DXT3_Format;\n      break;\n\n    case FOURCC_DXT5:\n\n      blockBytes = 16;\n      dds.format = THREE.RGBA_S3TC_DXT5_Format;\n      break;\n\n    default:\n\n      if (header[ off_RGBBitCount ] == 32\n        && header[ off_RBitMask ] & 0xff0000\n        && header[ off_GBitMask ] & 0xff00\n        && header[ off_BBitMask ] & 0xff\n        && header[ off_ABitMask ] & 0xff000000) {\n        isRGBAUncompressed = true;\n        blockBytes = 64;\n        dds.format = THREE.RGBAFormat;\n      } else {\n        console.error('THREE.DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC(fourCC));\n        return dds;\n      }\n  }\n\n  dds.mipmapCount = 1;\n\n  if (header[ off_flags ] & DDSD_MIPMAPCOUNT && loadMipmaps !== false) {\n\n    dds.mipmapCount = Math.max(1, header[ off_mipmapCount ]);\n\n  }\n\n  //TODO: Verify that all faces of the cubemap are present with DDSCAPS2_CUBEMAP_POSITIVEX, etc.\n\n  dds.isCubemap = header[ off_caps2 ] & DDSCAPS2_CUBEMAP ? true : false;\n\n  dds.width = header[ off_width ];\n  dds.height = header[ off_height ];\n\n  var dataOffset = header[ off_size ] + 4;\n\n  // Extract mipmaps buffers\n\n  var width = dds.width;\n  var height = dds.height;\n\n  var faces = dds.isCubemap ? 6 : 1;\n\n  for (var face = 0; face < faces; face++) {\n\n    for (var i = 0; i < dds.mipmapCount; i++) {\n\n      var byteArray, dataLength\n      if (isRGBAUncompressed) {\n        byteArray = loadARGBMip(buffer, dataOffset, width, height);\n        dataLength = byteArray.length;\n      } else {\n        dataLength = Math.max(4, width) / 4 * Math.max(4, height) / 4 * blockBytes;\n        byteArray = new Uint8Array(buffer, dataOffset, dataLength);\n      }\n\n      var mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\n      dds.mipmaps.push(mipmap);\n\n      dataOffset += dataLength;\n\n      width = Math.max(width * 0.5, 1);\n      height = Math.max(height * 0.5, 1);\n\n    }\n\n    width = dds.width;\n    height = dds.height;\n\n  }\n\n  return dds;\n\n}\n\nfunction log2 (x) {\n  return Math.log(x) / Math.LN2\n}\n\n// load function\n\nexport default function sendDdsTextureRequest (url, type, dataType, data, progress, s3Key) {\n  return new Promise(function (resolve, reject) {\n\n    var xhr = new XMLHttpRequest()\n\n    xhr.onload = function (event) {\n\n      if (xhr.status >= 200 && xhr.status < 300) {\n\n        var buffer = xhr.response,\n          dds\n\n        // parse data\n        try {\n          dds = parse(buffer, true)\n        } catch (e) {\n          var message = 'Error Loading DDS Texture\\n' + url + '\\n' + e.name + ': ' + e.message\n          console.error(message)\n          reject(message)\n          return\n        }\n\n        // See OpenGL ES 2.0.25 p. 81 paragraph 1 for the number of required mipmaps.\n        var mipmapCount = log2(Math.max(dds.width, dds.height)) + 1\n        if (dds.mipmapCount != mipmapCount) {\n          console.error('Reading DDS texture failed: ' + url + '\\nmipmaps counted: ' + dds.mipmapCount + ', should be: ' + mipmapCount +\n            '\\nPlease make sure you have mipmap generation enabled when creating DDS textures from images.')\n          reject('Error parsing DDS. Wrong mipmaps count. ' + url)\n          return\n        }\n\n        // create compressed texture\n        var texture = new THREE.CompressedTexture()\n\n        texture.format = dds.format\n        texture.mipmaps = dds.mipmaps\n        texture.image.width = dds.width\n        texture.image.height = dds.height\n        texture.image.src = url\n        texture.sourceFile = url\n        texture.url = url\n        texture.bufferByteLength = buffer.byteLength\n\n        // gl.generateMipmap fails for compressed textures\n        // mipmaps must be embedded in the DDS file\n        // or texture filters must not use mipmapping\n        texture.generateMipmaps = false\n\n        resolve(texture)\n\n      } else {\n        reject({\n          message: 'Http Request error',\n          url: url,\n          status: xhr.status,\n          headers: xhr.getAllResponseHeaders(),\n          event: event\n        })\n      }\n\n    }\n    xhr.onerror = function (event) {\n      reject({\n        message: 'Http Request error',\n        url: url,\n        status: xhr.status,\n        headers: xhr.getAllResponseHeaders(),\n        event: event\n      })\n    }\n\n    xhr.open('GET', url, true)\n    xhr.crossOrigin = \"Anonymous\"\n    xhr.responseType = 'arraybuffer'\n    xhr.send(null)\n\n  })\n}","import sendBasicRequest from './request/basic.js'\nimport sendJsonRequest from './request/json.js'\nimport sendTextureRequest from './request/texture.js'\nimport sendDdsTextureRequest from './request/dds-texture.js'\n\n// main\n\nexport default function request(args) {\n  // API\n  var url = args.url || args.uri\n  var method = args.method || 'GET'\n  var body = args.body\n  var type = getType(args.type, url, body)\n  \n  // TODO: add support for additional params\n  //var headers = args.headers || {}\n  //var qs = args.qs\n\n  //var noCache = !!args.noCache\n\n  // TODO: validate params\n  if (sendRequestByType[type]) {\n    return sendRequestByType[type](url, method, type, body)\n  } else {\n    return Promise.reject('Type '+type+' not supported.')\n  }\n\n}\n\n// shortcuts\n\nrequest.get = function get (url) {\n  return request({\n    method: 'GET',\n    url: url\n  })\n}\n\nrequest.getTexture = function getTexture (url) {\n  return request({\n    method: 'GET',\n    type: 'texture',\n    url: url\n  })\n\n}\n\n// private properties and methods\n\nvar sendRequestByType = {\n  'text': sendBasicRequest,\n  'arrayBuffer': sendBasicRequest,\n  'blob': sendBasicRequest,\n  'json': sendJsonRequest, // IE11 does not support responseType=json\n  //'ddsTexture': getDdsTexture,\n  'imageTexture': sendTextureRequest,\n  'ddsTexture': sendDdsTextureRequest\n  // TODO: add support for following types\n  //'document': sendDocumentRequest,\n  //'urlEncoded': sendUrlEncodedRequest,\n  //'formData': sendFormDataRequest,\n  //'img': sendImgRequest\n}\n\nvar typeByExtension = {\n  'buffer': 'arrayBuffer',\n  'txt': 'text',\n  'json': 'json'\n  // TODO: enable these once support for those types is provided\n  //'jpg': 'img',\n  //'jpeg': 'img',\n  //'jpe': 'img',\n  //'png': 'img',\n  //'gif': 'img',\n  //'xml': 'document',\n  //'html': 'document',\n  //'svg': 'document'\n}\n\nvar textureTypeByExtension = {\n  '.dds': 'ddsTexture',\n  '.jpg': 'imageTexture',\n  '.jpeg': 'imageTexture',\n  '.jpe': 'imageTexture',\n  '.png': 'imageTexture',\n  '.gif': 'imageTexture',\n  '.svg': 'imageTexture'\n}\n\nfunction getType (type, url, data) {\n  if (!url) return 'text'\n  var fileName = url.split('/').pop()\n  var extension = fileName.split('.').pop()\n\n  if (!type) {\n\n    if (data) {\n      // estimate dataType from data\n      if (data instanceof FormData) {\n        type = 'form-data'\n      } else if (_.isObject(data)) {\n        type = 'url-encoded'\n      }\n    } else {\n      // estimate dataType from URL\n      type = dataTypeFromUrl(url)\n    }\n\n    // fallback to text request\n    if (!type) {\n      type = 'text'\n    }\n\n  } else if (type === 'texture') {\n\n    // estimate texture type from URL\n    type = getTextureTypeFromUrl(url)\n\n  }\n\n  return type\n}\n\nvar typeByExtensionKeys = Object.keys(typeByExtension)\nfunction dataTypeFromUrl (url) {\n\n  var extension, i, l, urlLow = url.toLowerCase()\n\n  for (i= 0, l=typeByExtensionKeys.length; i<l; i++ ) {\n    extension = typeByExtensionKeys[i]\n    if (urlLow.substring( urlLow.length - extension.length ) === extension) {\n      return typeByExtension[ extension ]\n    }\n  }\n\n  return 'text'\n\n}\n\nfunction getTextureTypeFromUrl (url, isTexture) {\n\n  // get file extension\n  var search = url.match(/\\.[A-Za-z]+(?=\\?|$)/i)\n\n  if (search) {\n    var extension = search[ 0 ].toLowerCase()\n    return textureTypeByExtension[ extension ]\n  } else {\n    return false\n  }\n\n}","/*\n\n PERFORMANCE CRITICAL CODE\n\n readability may suffer from performance optimization\n ask tomas-polach if you have questions\n\n*/\n\nimport request from '../../../utils/io/request.js'\n\n// static method, @memberof View\n\n// constants\n\nvar THREEJS_TEXTURE_TYPES_MAP = {\n  // hi-res textures\n  'mapDiffuse': 'map',\n  'mapSpecular': 'specularMap',\n  'mapNormal':'normalMap',\n  'mapAlpha':'alphaMap',\n  'mapLight':'lightMap',\n  // lo-res textures\n  'mapDiffusePreview': 'map',\n  'mapSpecularPreview': 'specularMap',\n  'mapNormalPreview':'normalMap',\n  'mapAlphaPreview':'alphaMap',\n  'mapLightPreview':'lightMap'\n}\nvar WEBGL_WRAP_TYPES = {\n  repeat: 1000,\n  mirror: 1002,\n  clamp: 1001\n}\n// RepeatWrapping: 1000 / ClampToEdgeWrapping: 1001 / MirroredRepeatWrapping: 1002\n\n// helpers\n\nfunction onError (e) {\n  console.error('Texture could not been loaded: ', e)\n}\n\nvar textureRefCount = {}\n\nfunction countTextureReference ( key ) {\n  if ( key !== undefined ) {\n    if (textureRefCount[ key ]) {\n      textureRefCount[ key ]++\n    } else {\n      textureRefCount[ key ] = 1\n    }\n  }\n}\n\nfunction disposeIfPossible () {\n  var texture3d = this\n  var key = this.url\n  if (key) {\n    if (textureRefCount[ key ]) {\n      textureRefCount[ key ]--\n      if (textureRefCount[ key ] === 0) {\n//          console.log('dispose texture', texture3d.url)\n        texture3d.dispose()\n//          texture3d.needsUpdate = true\n      }\n    } else {\n//        console.warn('texture not in cache ' + key)\n      texture3d.dispose()\n    }\n  } else {\n    texture3d.dispose()\n//      texture3d.needsUpdate = true\n  }\n}\n\n// class\n\nexport default function loadTextures ( queue, TEXTURE_TYPES, vm, _attributes, material3d, mesh3d, resetTexturesOnLoadStart) {\n\n  // new textures\n\n  var\n    texture3dKeys = [],\n    textureKeys = [],\n    texturePromises = [],\n    textureCount = 0,\n    textureS3Key,\n    texture3d,\n    textureType3d,\n    textureType,\n    needsUpdate,\n    hasUv1Textures = false,\n    geometry3d = mesh3d ? mesh3d.geometry : null,\n    attributes3d = geometry3d ? geometry3d.attributes : null,\n    hasUvVertices = attributes3d && attributes3d.uv && attributes3d.uv.count > 0,\n    hasUv2Vertices = attributes3d && attributes3d.uv2 && attributes3d.uv2.count > 0,\n    i,\n    l\n\n  // UV1 textures\n\n  for (i = 0, l = TEXTURE_TYPES.UV1.length; i < l; i++) {\n    textureType = TEXTURE_TYPES.UV1[ i ]\n    textureS3Key = _attributes[ textureType ]\n    textureType3d = THREEJS_TEXTURE_TYPES_MAP[ textureType ]\n    texture3d = material3d[ textureType3d ]\n\n    if (textureS3Key) {\n      if (hasUvVertices) {\n        hasUv1Textures = true\n      } else {\n        console.error('Texture ' + textureS3Key + ' could not be assigned because geometry has no UV vertices.')\n        continue\n      }\n    }\n\n    if (textureS3Key) {\n\n      needsUpdate = true\n\n      // update wrap\n      wrap = WEBGL_WRAP_TYPES[ _attributes.wrap ] || WEBGL_WRAP_TYPES[ 'repeat' ]\n      if (texture3d && wrap !== texture3d.wrapS) {\n        texture3d.wrapS = wrap\n        texture3d.wrapT = wrap\n        texture3d.needsUpdate = true\n      }\n\n      // don't reload texture if files are of same origin\n      if (\n        texture3d\n        && texture3d.url\n        && textureS3Key === texture3d.url\n      ) {\n        needsUpdate = false\n      }\n\n      if (needsUpdate && texture3d && resetTexturesOnLoadStart) {\n        // dispose old texture\n        if (material3d[ textureType3d ] && material3d[ textureType3d ].disposeIfPossible) {\n          material3d[ textureType3d ].disposeIfPossible()\n        }\n        material3d[ textureType3d ] = null\n      }\n\n      if (needsUpdate) {\n        // load new texture\n        texturePromises[ textureCount ] = request.getTexture(textureS3Key, { queue: queue }).catch(onError)\n        textureKeys[ textureCount ] = textureType\n        texture3dKeys[ textureCount ] = textureType3d\n        textureCount++\n        material3d.needsUpdate = true\n      }\n\n    } else if (material3d[ textureType3d ]) {\n\n      // no new texture: just dispose old texture\n      if (material3d[ textureType3d ] && material3d[ textureType3d ].disposeIfPossible) {\n        material3d[ textureType3d ].disposeIfPossible()\n      }\n      material3d[ textureType3d ] = null\n      material3d.needsUpdate = true\n\n    }\n\n  }\n\n  // UV1 vectors\n\n  if (attributes3d) {\n\n    // UV channel 1\n\n    if (hasUv1Textures) {\n\n      // resize UV array\n\n      if (_attributes.size) {\n\n        var\n          targetScaleU = _attributes.size[ 0 ],\n          targetScaleV = _attributes.size[ 1 ],\n          currentScaleU = attributes3d.uv._scaleU || 1,\n          currentScaleV = attributes3d.uv._scaleV || 1\n        // check if uv recalculation is needed\n        if (targetScaleU !== currentScaleU || targetScaleV !== currentScaleV) {\n          // remember original uv array\n          if (!attributes3d.uv._source) {\n            attributes3d.uv._source = attributes3d.uv.array\n          }\n          // internals\n          var\n            sourceUVs = attributes3d.uv._source,\n            resizedUVs = new Float32Array(sourceUVs.length)\n          // resize array\n          for (var i = 0, l = resizedUVs.length; i < l; i += 2) {\n            resizedUVs[ i ] = sourceUVs[ i ] / targetScaleU\n            resizedUVs[ i + 1 ] = sourceUVs[ i + 1 ] / targetScaleV\n          }\n          // set resized array\n          attributes3d.uv.array = resizedUVs\n          // remember size\n          attributes3d.uv._scaleU = targetScaleU\n          attributes3d.uv._scaleV = targetScaleV\n          // set update flag\n          attributes3d.uv.needsUpdate = true\n        }\n\n      }\n\n    }\n\n    // UV channel 2\n\n    if (_attributes[ TEXTURE_TYPES.UV2 ]) {\n\n      // check uv count\n      if (hasUv2Vertices) {\n\n        // everything ok - load lightmap\n        textureType = TEXTURE_TYPES.UV2\n        textureS3Key = _attributes[ textureType ]\n        texturePromises[ textureCount ] = request.getTexture(textureS3Key, { queue: queue }).catch(onError)\n        textureKeys[ textureCount ] = textureType\n        texture3dKeys[ textureCount ] = THREEJS_TEXTURE_TYPES_MAP[ textureType ]\n        textureCount++\n\n      } else {\n\n        console.error('Lightmap ' + _attributes[ TEXTURE_TYPES.UV2 ] + ' could not be assigned because geometry has no lightmap UV (UV2) vertices.')\n\n      }\n\n    }\n\n  }\n\n  // load textures\n\n  var promise, wrap\n  if (textureCount) {\n\n    promise = Promise.all(texturePromises).then(function (textures) {\n      \n      // assign textures\n      wrap = WEBGL_WRAP_TYPES[ _attributes.wrap ] ||WEBGL_WRAP_TYPES[ 'repeat' ]\n      for (i = 0; i < textureCount; i++) {\n        // FIXME:\n        // if (\n        //   // avoid racing conditions\n        // textures[ i ] && textures[ i ].url === material3d._texturesToBeLoaded[ textureKeys[i] ] &&\n        //   // filter texture loading errors\n        // (textures[i] instanceof THREE.CompressedTexture || textures[i] instanceof THREE.Texture)\n        // ){\n          \n          // cache\n          countTextureReference(textures[ i ].url)\n          textures[ i ].disposeIfPossible = disposeIfPossible\n\n          // set texture settings\n          textures[ i ].wrapS = wrap\n          textures[ i ].wrapT = wrap\n          textures[ i ].anisotropy = 2\n          // dispose previous texture\n          if (material3d[ texture3dKeys[ i ] ] && material3d[ texture3dKeys[ i ] ].disposeIfPossible) {\n            material3d[ texture3dKeys[ i ] ].disposeIfPossible()\n          }\n          // add new texture\n          material3d[ texture3dKeys[ i ] ] = textures[ i ]\n          material3d[ texture3dKeys[ i ] ].needsUpdate = true\n        // }\n      }\n      // update material\n      material3d.needsUpdate = true\n\n      // to prevent warnings: \"GL ERROR :GL_INVALID_OPERATION : glDrawElements: attempt to access out of range vertices in attribute 1 \"\n      // this happens when switching from a material without texture to a material with texture or vice versa\n      if ( mesh3d && mesh3d.geometry ) {\n        mesh3d.geometry.buffersNeedUpdate = true\n        mesh3d.geometry.uvsNeedUpdate = true\n      }\n\n      // render\n      if (vm) vm.viewport.render()\n\n    })\n\n  } else {\n\n    promise = Promise.resolve()\n\n    // render\n    if (vm) vm.viewport.render()\n\n  }\n\n  return promise\n\n}\n","/*\n\n PERFORMANCE CRITICAL CODE\n\n readability may suffer from performance optimization\n ask tomas-polach if you have questions\n\n*/\n\nimport loadTextures from './load-textures.js'\nimport runtime from '../../../core/runtime.js'\n\n// static method, @memberof View\n\n// constants\n\nvar HI_RES_TEXTURE_TYPES = {\n  UV1: [ 'mapDiffuse', 'mapSpecular', 'mapNormal', 'mapAlpha' ],\n  UV2: 'mapLight'\n}\nvar LO_RES_TEXTURE_TYPES = {\n  UV1: [ 'mapDiffusePreview', 'mapSpecularPreview', 'mapNormalPreview', 'mapAlphaPreview' ],\n  UV2: 'mapLightPreview'\n}\n\n// RepeatWrapping: 1000 / ClampToEdgeWrapping: 1001 / MirroredRepeatWrapping: 1002\n\n// function\n\nexport default function setMaterial (args) {\n\n  var vm = args.vm\n  var material3d = args.material3d\n  var mesh3d = args.mesh3d\n  var _attributes = args.attributes || {}\n  var reset = args.reset !== undefined ? args.reset : true\n  var loadingQueuePrefix = args.loadingQueuePrefix\n  var onFirstTextureSetLoaded = args.onFirstTextureSetLoaded\n\n  // transparency\n\n//     material3d.transparent = true\n//     material3d.opacity = 0.55\n\n  // depth buffer\n//    if (material3d.opacity < 1) {\n//      material3d.depthWrite = false\n//      var alphaTest = material3d.opacity - 0.001\n//      if (alphaTest < 0) alphaTest = 0\n//      material3d.alphaTest = alphaTest\n//    }\n\n  // specular coefficient\n\n  material3d.shininess = _attributes.specularCoef !== undefined ? _attributes.specularCoef : 0.1\n\n  // colors\n\n  if (_attributes.colorDiffuse) {\n    material3d.color.r = _attributes.colorDiffuse[ 0 ]\n    material3d.color.g = _attributes.colorDiffuse[ 1 ]\n    material3d.color.b = _attributes.colorDiffuse[ 2 ]\n  } else if (reset) {\n    if (_attributes.mapDiffuse) {\n      // has diffuse texture\n      material3d.color.r = 1\n      material3d.color.g = 1\n      material3d.color.b = 1\n    } else {\n      // has NO diffuse texture\n      material3d.color.r = 0.85\n      material3d.color.g = 0.85\n      material3d.color.b = 0.85\n    }\n\n  }\n\n  if (_attributes.colorAmbient) {\n    // material3d.ambient.r = _attributes.colorAmbient[ 0 ]\n    // material3d.ambient.g = _attributes.colorAmbient[ 1 ]\n    // material3d.ambient.b = _attributes.colorAmbient[ 2 ]\n  } else if (reset) {\n    // if (!material3d.ambient) {\n    //   material3d.ambient = new THREE.Color()\n    // }\n    // material3d.ambient.r = material3d.color.r\n    // material3d.ambient.g = material3d.color.g\n    // material3d.ambient.b = material3d.color.b\n  }\n\n  if (_attributes.colorSpecular) {\n    material3d.specular.r = _attributes.colorSpecular[ 0 ]\n    material3d.specular.g = _attributes.colorSpecular[ 1 ]\n    material3d.specular.b = _attributes.colorSpecular[ 2 ]\n  } else if (reset) {\n    if (!material3d.specular) {\n      material3d.specular = new THREE.Color()\n    }\n    material3d.specular.r = 0.25\n    material3d.specular.g = 0.25\n    material3d.specular.b = 0.25\n  }\n\n  if (_attributes.colorEmissive) {\n    material3d.emissive.r = _attributes.colorEmissive[ 0 ]\n    material3d.emissive.g = _attributes.colorEmissive[ 1 ]\n    material3d.emissive.b = _attributes.colorEmissive[ 2 ]\n  } else if (reset) {\n    if (!material3d.emissive) {\n      material3d.emissive = new THREE.Color()\n    }\n    material3d.emissive.r = 0\n    material3d.emissive.g = 0\n    material3d.emissive.b = 0\n  }\n\n  // lightmap settings\n  if (_attributes.mapLight || _attributes.mapLightPreview) {\n    material3d.enhancedLightMap = material3d.enhancedLightMap || {}\n    material3d.enhancedLightMap.intensity = (_attributes.mapLightIntensity !== undefined) ? _attributes.mapLightIntensity : 1\n    material3d.enhancedLightMap.center = (_attributes.mapLightCenter !== undefined) ? _attributes.mapLightCenter : 0.5\n    material3d.enhancedLightMap.falloff = (_attributes.mapLightFalloff !== undefined) ? _attributes.mapLightFalloff : 0.5\n  }\n\n  // shadows\n\n  if (mesh3d) {\n    // (2017/04/05) Interiors are currently not shadow receivers, as this\n    // would produce many artifacts. However, flat and thin objects laying\n    // very close to the floor (such as carpets) need to be excepted from\n    // that rule. This is a temporary way to achieve that.\n    if (!mesh3d.geometry.boundingBox)\n      mesh3d.geometry.computeBoundingBox();\n    var boundingBox = mesh3d.geometry.boundingBox;\n    var position    = boundingBox.min.clone();\n    position.applyMatrix4(mesh3d.matrixWorld);\n    var meshIsFlat          = boundingBox.max.y - boundingBox.min.y < 0.05;\n    var meshIsOnGroundLevel = position.y < 0.1;\n    mesh3d.castShadow    = !(meshIsFlat && meshIsOnGroundLevel) && _attributes.castRealTimeShadows;\n    mesh3d.receiveShadow =  (meshIsFlat && meshIsOnGroundLevel) || _attributes.receiveRealTimeShadows;\n    mesh3d.material.needsUpdate = true // without this, receiveShadow does not become effective\n  }\n\n  // load textures\n\n  // remember current textures (avoiding racing conditions between texture loading and material updates)\n  material3d._texturesToBeLoaded = {\n    // hires textures\n    mapDiffuse: _attributes.mapDiffuse,\n    mapSpecular: _attributes.mapSpecular,\n    mapNormal: _attributes.mapNormal,\n    mapAlpha: _attributes.mapAlpha,\n    mapLight: _attributes.mapLight,\n    // lores textures\n    mapDiffusePreview: _attributes.mapDiffusePreview,\n    mapSpecularPreview: _attributes.mapSpecularPreview,\n    mapNormalPreview: _attributes.mapNormalPreview,\n    mapAlphaPreview: _attributes.mapAlphaPreview,\n    mapLightPreview: _attributes.mapLightPreview\n  }\n\n  var\n    loadingTexturesPromise,\n    loadingQueue,\n    isLoadingLoResTextures,\n    hasLoResTextures = _attributes.mapDiffusePreview || _attributes.mapSpecularPreview || _attributes.mapNormalPreview ||_attributes.mapAlphaPreview || _attributes.mapLightPreview,\n//      hasHiResTextures = _attributes.mapDiffuse || _attributes.mapSpecular || _attributes.mapNormal ||_attributes.mapAlpha || _attributes.mapLight,\n    // TODO: readd hiResTextures configs\n    // hiResTexturesEnabled = !configs.isMobile && vm.viewport.a.hiResTextures && configs.compatibility.webglCompressedTextures\n    hiResTexturesEnabled = !runtime.isMobile && runtime.webGl.supportsDds\n\n  if (!hiResTexturesEnabled || (hasLoResTextures && !material3d.firstTextureLoaded)) {\n    if (loadingQueuePrefix) {\n      loadingQueue = loadingQueuePrefix + 'TexturesLoRes'\n    }\n    loadingTexturesPromise = loadTextures(loadingQueue, LO_RES_TEXTURE_TYPES, vm, _attributes, material3d, mesh3d, false)\n    isLoadingLoResTextures = true\n  } else {\n    if (loadingQueuePrefix) {\n      loadingQueue = loadingQueuePrefix + 'TexturesHiRes'\n    }\n    loadingTexturesPromise = loadTextures(loadingQueue, HI_RES_TEXTURE_TYPES, vm, _attributes, material3d, mesh3d, false)\n    isLoadingLoResTextures = false\n  }\n\n\n  // set opacity after textures have loaded\n  loadingTexturesPromise.then(function(){\n\n    if (_attributes.opacity !== undefined && _attributes.opacity < 1) {\n      // 0 = fully transparent, 1 = non-transparent\n      material3d.transparent = true\n      material3d.opacity = _attributes.opacity\n    } else if (_attributes.mapAlpha) {\n      // has alpha map\n      material3d.transparent = true\n      material3d.opacity = 1\n    } else {\n      material3d.transparent = false\n      material3d.opacity = 1\n    }\n\n    // trigger callback\n    if (onFirstTextureSetLoaded) onFirstTextureSetLoaded()\n\n    // set onFirstTextureLoaded\n    if (hasLoResTextures) material3d.firstTextureLoaded = true\n\n  })\n\n  // 2. load hi-res textures (if: material has preview texture set, not on mobile, hi-res enabled and supported)\n  if (isLoadingLoResTextures && hiResTexturesEnabled) {\n    loadingTexturesPromise.then(function(){\n      if (loadingQueuePrefix) {\n        loadingQueue = loadingQueuePrefix + 'TexturesHiRes'\n      }\n      loadTextures(loadingQueue, HI_RES_TEXTURE_TYPES, vm, _attributes, material3d, mesh3d, false)\n    })\n  }\n\n  // return texture loading promise\n\n  return loadingTexturesPromise\n\n}","// static class, @memberof View\n\n// TODO: add dependencies\n// * compareArrays\n// * generateWireframeBuffer\n\n// class\n\nexport default function Wireframe () {\n\n  // internals\n  this._wireframeGeometry = new THREE.BufferGeometry()\n  this._wireframeGeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array(0), 3 ) )\n  this._wireframeMaterial = new THREE.LineBasicMaterial()\n\n  this._positions = null\n  this._buffer = null\n  this._thresholdAngle = 10\n  this._thickness = 1\n  this._color = [0,0,0]\n  this._opacity = 1\n\n  // init\n  THREE.Line.call( this, this._wireframeGeometry, this._wireframeMaterial, THREE.LinePieces )\n\n}\n\n// inherit from THREE Line prototype\n\nWireframe.prototype = Object.create( THREE.Line.prototype )\nWireframe.prototype.constructor = Wireframe\n\n// extend with own methods\n\nWireframe.prototype.update = function (options) {\n\n  // API\n  var positions = options.positions\n  //var normals = options.normals\n  var thresholdAngle = options.thresholdAngle === undefined ? this._thresholdAngle : options.thresholdAngle\n  var thickness = options.thickness === undefined ? this._thickness : options.thickness\n  var color = options.color === undefined ? this._color : options.color\n  var opacity = options.opacity === undefined ? this._opacity : options.opacity\n\n\n  if (thickness === 0) {\n\n    this.visible = false\n\n  } else {\n    \n    // take care of line buffer\n    var regenerateBuffer = (!this._buffer || thresholdAngle !== this._thresholdAngle || !compareArrays(this._positions, positions))\n    if (regenerateBuffer) {\n\n      // generate new buffer from positions\n      //var newBuffer = generateWireframeBuffer( positions, thresholdAngle )\n      var newBuffer = new Float32Array(27)\n      if (newBuffer.length) {\n        this._wireframeGeometry.attributes.position.array = newBuffer\n        this._wireframeGeometry.attributes.position.needsUpdate = true\n        this.visible = true\n      } else {\n        this.visible = false\n      }\n      // remember settings\n      this._buffer = newBuffer\n      this._positions = positions\n      this._thresholdAngle = thresholdAngle\n\n    } else if (this._thickness === 0) {\n\n      // was hidden\n      this.visible = true\n\n    }\n\n    // update material\n    this._wireframeMaterial.color.r = color[ 0 ]\n    this._wireframeMaterial.color.g = color[ 1 ]\n    this._wireframeMaterial.color.b = color[ 2 ]\n    this._wireframeMaterial.opacity = opacity\n    this._wireframeMaterial.linewidth = thickness\n    // remember settings\n    this._color = color\n    this._opacity = opacity\n\n  }\n\n  this._thickness = thickness\n\n}\n\nWireframe.prototype.destroy = function () {\n\n  this._wireframeGeometry = null\n  this._wireframeMaterial = null\n\n  this._positions = null\n  this._buffer = null\n  this._thresholdAngle = null\n  this._thickness = null\n  this._color = null\n  this._opacity = null\n\n}","import setMaterial from './data3d-view/set-material.js'\nimport Wireframe from './data3d-view/wireframe.js'\n\n// constants\n\nvar WEBGL_SIDE = {\n  front: 0,\n  back: 1,\n  both: 2\n}\n\nvar DEG_TO_RAD = Math.PI / 180\nvar RAD_TO_DEG = 180 / Math.PI\n\n// shared variables\n\nvar geometry3dCache = {}\n\n/**\n * @name three.Data3dView\n * @memberof three\n * @param options\n * @constructor\n */\n\nexport default function Data3dView (options) {\n\n  // API\n  this.threeParent = options.parent\n\n  // internals\n  this.meshKeys = []\n  this.meshes = {}\n  this.materialKeys = []\n  this.materials = {}\n  this._meshes3d = {} // three meshes indexed by meshId\n  this._wireframes3d = {} // wireframe  three meshes indexed by meshId\n  this._materials3d = {} // three materials indexed by meshId\n\n}\n\nData3dView.prototype = {\n\n  set: function (data3d, options) {\n\n    // API\n    options = options ||{}\n    var\n      meshes = data3d.meshes || this.meshes,\n      meshKeys = data3d.meshKeys,\n      materials = data3d.materials || this.materials,\n      materialKeys = data3d.materialKeys,\n      loadingQueuePrefix = data3d.loadingQueuePrefix || options.loadingQueuePrefix,\n      onFirstTextureSetLoaded = options.onFirstTextureSetLoaded\n\n    // internals\n    var self = this, meshId, mesh, materialId, wireframe3d, positions, uvs, uvs2, scale,\n      normals, mesh3d, geometry3d, material3d, position, rotRad, rotDeg, i, l\n\n    // output\n    var promise\n\n    ///////////////// meshes\n\n    if (meshes) {\n\n      // generate IDs if not provided\n      if (!meshKeys) {\n        meshKeys = Object.keys(meshes)\n      }\n\n      for (i = 0, l = meshKeys.length; i < l; i++) {\n\n        meshId = meshKeys[ i ]\n        mesh = meshes[ meshId ]\n\n        // internals\n        materialId = mesh.material\n        positions = mesh.positions\n        uvs = mesh.uvs\n        uvs2 = mesh.uvsLightmap\n        normals = mesh.normals\n        position = mesh.position\n        rotRad = mesh.rotRad\n        rotDeg = mesh.rotDeg\n        scale = mesh.scale\n\n        // three.js materials\n        if (!self._materials3d[ meshId ]) {\n          // (one material pro mesh, because some of our mesh properties are material properties and it does not matter performance wise)\n          material3d = new THREE.MeshPhongMaterial({ opacity: 0.5, transparent: true })\n          material3d.name = materialId\n          if (!materials) {\n            // there is no material properties. using default properties\n            setMaterial({ material3d: material3d })\n          }\n          self._materials3d[ meshId ] = material3d\n        }\n\n        // set face side (a mesh property in our data structure, but a material property in three.js data structure)\n        self._materials3d[ meshId ].side = WEBGL_SIDE[ meshes[ meshId ].side ] || WEBGL_SIDE['front']\n\n        // create three.js meshes\n\n        if (!self._meshes3d[ meshId ]) {\n\n          // create geometry\n          geometry3d = createOrReuseGeometry3d( mesh.cacheKey )\n          // create mesh\n          mesh3d = new THREE.Mesh(geometry3d, material3d)\n          mesh3d.userData = self.userData\n          // add to parent\n          self.threeParent.add(mesh3d)\n          // remembers\n          self._meshes3d[ meshId ] = mesh3d\n\n          // create a separate geometry object for wireframes\n          wireframe3d = new Wireframe()\n          // add to parent\n          //self._meshes3d[ meshId ].add(wireframe3d)\n          // remember\n          self._wireframes3d[ meshId ] = wireframe3d\n\n        } else {\n\n          mesh3d = self._meshes3d[ meshId ]\n          geometry3d = mesh3d.geometry\n\n        }\n\n        // apply scale\n        if (scale) {\n          mesh3d.scale.set( scale[0] , scale[1], scale[2] )\n        }\n\n        // apply position\n        if (rotRad) {\n          mesh3d.rotation.set( rotRad[0] , rotRad[1], rotRad[2] )\n        } else if (rotDeg) {\n          mesh3d.rotation.set( rotDeg[0] * DEG_TO_RAD, rotDeg[1] * DEG_TO_RAD, rotDeg[2] * DEG_TO_RAD )\n        }\n\n        // apply buffers if they are different than current buffers\n        if (geometry3d.attributes.position === undefined) {\n          geometry3d.attributes.position = new THREE.BufferAttribute(positions, 3)\n//              geometry3d.addAttribute( 'position', new THREE.BufferAttribute(positions, 3) )\n          // The bounding box of the scene may need to be updated\n          if (this.vm && this.vm.viewport && this.vm.viewport.webglView)\n            self.vm.viewport.webglView.modelBoundingBoxNeedsUpdate = true\n        } else if (geometry3d.attributes.position.array !== positions ) {\n          geometry3d.attributes.position.array = positions\n          geometry3d.attributes.position.needsUpdate = true\n          // Three.js needs this to update\n          geometry3d.computeBoundingSphere()\n          // The bounding box of the scene may need to be updated\n          if (this.vm && this.vm.viewport && this.vm.viewport.webglView)\n            self.vm.viewport.webglView.modelBoundingBoxNeedsUpdate = true\n        }\n        if (geometry3d.attributes.normal === undefined) {\n          geometry3d.attributes.normal = new THREE.BufferAttribute(normals, 3)\n//              geometry3d.addAttribute( 'normal', new THREE.BufferAttribute(normals, 3) )\n        } else if (geometry3d.attributes.normal.array !== normals ) {\n          geometry3d.attributes.normal.array = normals\n          geometry3d.attributes.normal.needsUpdate = true\n        }\n        // geometry3d.attributesKeys = ['position', 'normal']\n        // set uvs channel 1 (material)\n        if (uvs) {\n          if (geometry3d.attributes.uv === undefined) {\n            geometry3d.attributes.uv = new THREE.BufferAttribute(uvs, 2)\n          } else if (geometry3d.attributes.uv.array !== uvs ) {\n            geometry3d.attributes.uv.array = uvs\n            geometry3d.attributes.uv.needsUpdate = true\n            // remove previous scale settings\n            delete geometry3d.attributes.uv._scaleU\n            delete geometry3d.attributes.uv._scaleV\n            delete geometry3d.attributes.uv._source\n          }\n          // geometry3d.attributesKeys[ 2 ] = 'uv'\n        } else if (geometry3d.attributes.uv) {\n          delete geometry3d.attributes.uv\n        }\n        if (uvs2) {\n          if (geometry3d.attributes.uv2 === undefined) {\n            geometry3d.attributes.uv2 = new THREE.BufferAttribute(uvs2, 2)\n          } else if (geometry3d.attributes.uv2.array !== uvs2 ) {\n            geometry3d.attributes.uv2.array = uvs2\n            geometry3d.attributes.uv2.needsUpdate = true\n          }\n          // geometry3d.attributesKeys[ geometry3d.attributesKeys.length++ ] = 'uv2'\n        } else if (geometry3d.attributes.uv2) {\n          delete geometry3d.attributes.uv2\n        }\n\n        // (2017/01/09) The WebGL buffer of the pickingColor attribute is erroneously deleted\n        // by ThreeJS (r69) in deallocateGeometry(). ThreeJS doesn't seem to account for the fact\n        // that the attribute is shared by multiple geometries. It then does not get recreated, because\n        // this function was attempting to manually set BufferGeometry.attributesKeys, missing any\n        // extra attributes such as pickingColor.\n        geometry3d.attributesKeys = Object.keys(geometry3d.attributes);\n\n        // update wireframe\n\n        if (materials[ materialId ]) {\n          self._wireframes3d[ meshId ].update({\n            positions: positions,\n            thickness: materials[ materialId ].wireframeThickness === undefined ? 0 : materials[ materialId ].wireframeThickness,\n            thresholdAngle: materials[ materialId ].wireframeThresholdAngle,\n            color: materials[ materialId ].wireframeColor,\n            opacity: materials[ materialId ].wireframeOpacity\n          })\n        }\n\n      }\n\n      // remove obsolete three.js meshes\n      var mesh, meshIds = Object.keys(self._meshes3d)\n      meshIds.forEach(function(meshId, i){\n        mesh = self._meshes3d[meshId]\n        if (!meshes[ meshId ]) {\n          // destroy wireframe geometry\n          /*\n          var wireframe3d = self._wireframes3d[ meshId ]\n          if (wireframe3d.parent) {\n            wireframe3d.parent.remove( wireframe3d )\n            wireframe3d.geometry.dispose()\n          }\n          */\n          // destroy geometry\n          console.log(self._meshes3d, meshId)\n          var geometry3d = self._meshes3d[ meshId ].geometry\n          disposeGeometry3dIfNotUsedElsewhere(self.meshes[ meshId ].cacheKey, geometry3d)\n          // destroy threejs mesh\n          var mesh3d = self._meshes3d[ meshId ]\n          if (mesh3d.parent) {\n            mesh3d.parent.remove( mesh3d )\n          }\n          // destroy material\n          var material3d = self._materials3d[ meshId ]\n          if (material3d.map) material3d.map.disposeIfPossible()\n          if (material3d.specularMap) material3d.specularMap.disposeIfPossible()\n          if (material3d.normalMap) material3d.normalMap.disposeIfPossible()\n          if (material3d.alphaMap) material3d.alphaMap.disposeIfPossible()\n          if (material3d.lightMap) material3d.lightMap.disposeIfPossible()\n          material3d.dispose()\n          // remove reference to destroyed 3d objects\n          delete self._meshes3d[ meshId ]\n          delete self._wireframes3d[ meshId ]\n          delete self._materials3d[ meshId ]\n        }\n      })\n\n      // update properties\n      self.meshKeys = meshKeys\n      self.meshes = meshes\n\n    }\n\n    ///////////////// materials\n\n    if (materials) {\n\n      var materialPromises = [], material\n      for (i = 0, l = self.meshKeys.length; i < l; i++) {\n        meshId = self.meshKeys[ i ]\n        materialId = self.meshes[ meshId ].material\n\n        // material attributes\n        material = materials[ materialId ]\n        if (material && Object.keys(material).length) {\n          // set material\n          materialPromises[ i ] = setMaterial({\n            vm: self.vm,\n            loadingQueuePrefix: loadingQueuePrefix,\n            mesh3d: self._meshes3d[ meshId ],\n            material3d: self._materials3d[ meshId ],\n            attributes: materials[ materialId ],\n            onFirstTextureSetLoaded: onFirstTextureSetLoaded\n          })\n        }\n\n      }\n\n      // output\n      promise = Promise.all(materialPromises)\n\n      // update properties\n      self.materialKeys = materialKeys\n      self.materials = materials\n\n    }\n\n    ///////////////// return\n\n    if (!promise) {\n      promise = Promise.resolve()\n    }\n\n    return promise.then(function(){\n      if (self.isDestroyed) return\n      //self.vm.viewport.render()\n    })\n\n  },\n\n  hasMeshes: function hasMeshes() {\n    return Object.keys(this._meshes3d).length > 0\n  },\n\n  setMeshes: function(meshes){\n    this.set({\n      meshes: meshes\n    })\n  },\n\n  setMaterials: function(materials, options){\n    this.set({\n      materials: materials\n    }, options)\n  },\n\n  reset: function(){\n\n    this.set({\n      meshes: {},\n      materials: {}\n    })\n\n  },\n\n  destroy: function(){\n\n    this.isDestroyed = true\n\n    this.reset()\n\n    this.vm = null\n    this.threeParent = null\n    this.userData = null\n\n    this.threeParent = null\n\n    // internals\n    this.meshKeys = null\n    this.meshes = null\n    this.materialKeys = null\n    this.materials = null\n    this._meshes3d = null\n    this._materials3d = null\n\n  }\n\n}\n\n// helpers\n\nfunction createOrReuseGeometry3d( key ) {\n  if (key) {\n    // use cache\n    if (geometry3dCache[ key ]) {\n      geometry3dCache[ key ].refCount++\n    } else {\n      geometry3dCache[ key ] = {\n        geometry3d: new THREE.BufferGeometry(),\n        refCount: 1\n      }\n    }\n    return geometry3dCache[ key ].geometry3d\n  } else {\n    // no key no cache\n    return new THREE.BufferGeometry()\n  }\n}\n\nfunction disposeGeometry3dIfNotUsedElsewhere( key, geometry3d ) {\n  if (key) {\n    // involve cache\n    if (geometry3dCache[ key ]) {\n      geometry3dCache[ key ].refCount--\n      if (geometry3dCache[ key ].refCount < 1) {\n        geometry3dCache[ key ].geometry3d.dispose()\n        delete geometry3dCache[ key ]\n      }\n    } else {\n      // (2017/01/09) See comment in ThreeView.set()\n      // if (geometry3d.attributes.pickingColor)\n      //  delete geometry3d.attributes['pickingColor'];\n      geometry3d.dispose()\n    }\n  } else {\n    // no key bo cache\n    // (2017/01/09) See comment in ThreeView.set()\n    // if (geometry3d.attributes.pickingColor)\n    //   delete geometry3d.attributes['pickingColor'];\n    geometry3d.dispose()\n  }\n}","\"use strict\";\nvar es5 = require(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\";\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n","\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n","\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = require(\"./schedule\");\nvar Queue = require(\"./queue\");\nvar util = require(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n","\"use strict\";\nvar es5 = require(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = require(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n","\"use strict\";\nvar util = require(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = require(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = require(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0)); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];};\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n","\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = require(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n","import Promise from 'bluebird'\nimport runtime from '../../core/runtime.js'\nimport uuid from '../../utils/uuid.js'\n\n// main\n\nexport default function JsonRpc2Client () {\n\n  this._openRequests = {} // open request cache (indexed by request id)\n  this._closedRequestIds = []\n\n}\n\nJsonRpc2Client.prototype = {\n\n  // private methods\n\n  _handleError: function (message, additionalInfo) {\n    console.error(message, additionalInfo)\n  },\n\n  _closeRequest: function(id) {\n    // remove request from open request cache\n    delete this._openRequests[ id ]\n    // remember closed request\n    this._closedRequestIds.push(id)\n  },\n\n  // public methods\n\n  createRequest: function (methodName, params) {\n\n    var self = this\n\n    var id = uuid.generate()\n    var timestamp = Date.now()\n    var message = {\n      jsonrpc: '2.0',\n      method: methodName,\n      params: params,\n      id: id\n    }\n    var request = {\n      id: id,\n      message: message,\n      timestamp: timestamp\n    }\n    var promise = new Promise(function(resolve, reject){\n      request._resolve = resolve\n      request._reject = reject\n      request.cancel = reject\n    })\n    request.promise = promise\n\n    // remember open request\n    self._openRequests[ id ] = request\n\n    // handle closing of request independent of promise fate\n    promise.finally(function(){\n      self._closeRequest(id)\n    }).catch(function(){\n      self._closeRequest(id)\n    })\n\n    // return request\n    return request\n\n  },\n\n  handleResponse: function (response) {\n\n    var id = response.id\n    var request = this._openRequests[ id ]\n\n    if (id === undefined) {\n      // not valid JSON-RPC2 response\n      if (runtime.isDebugMode) console.error('Incoming message is not a valid JSON-RPC2 response (ID should be present as string, number or null).', response)\n\n    } else if (request) {\n\n      // response to an open request\n      if (response.error) {\n        if (response.error.message) {\n          if (runtime.isDebugMode) console.error('API error response: ', response.error, '\\nOriginal JSON-RPC2 request: ', request.message)\n          request._reject(response.error)\n        } else {\n          // has no error message (non-standard): log everything into browser console\n          if (runtime.isDebugMode) console.error('API error response: ', response, '\\nOriginal JSON-RPC2 request: ', request.message)\n          request._reject('Undefined Error. Check console for details.')\n        }\n      } else {\n        // success\n        request._resolve(response.result)\n      }\n\n    } else if (this._closedRequestIds.indexOf(id) !== -1) {\n      // Request has been closed already or timed out\n      if (runtime.isDebugMode) console.error('JSON-RPC2 request has already been responded, canceled or timed out.', id)\n\n    } else if (id === null) {\n      // id = null (valid according to JSON-RPC2 specs. but can not be matched with request. should be avoided!)\n      if (runtime.isDebugMode) console.error('Incoming JSON-RPC2 response has ID = null.', response)\n\n    } else {\n      // unknown id\n      if (runtime.isDebugMode) console.error('Incoming JSON-RPC2 response has an unknown ID.', id)\n\n    }\n\n  }\n\n}","import Promise from 'bluebird'\nimport runtime from '../../core/runtime.js'\nimport fetch from '../../utils/io/fetch.js'\nimport JsonRpc2Client from './json-rpc2-client.js'\n// import cache from './common/promise-cache.js'\n\n// configs\nvar DEFAULT_API_URL = 'https://spaces.archilogic.com/api/v2'\n\n// internals\nvar rpcClient = new JsonRpc2Client()\n\n// main\n\n// TODO: add api.onMethod('methodName')\n// TODO: add api.onNotification('methodName')\n\nexport default function callService (methodName, params) {\n\n  // API\n  params = params || {}\n\n  // try cache\n  // var cacheKey\n  // if (useCache) {\n  //   cacheKey = JSON.stringify([methodName, params, options])\n  //   var promiseFromCache = cache.get(cacheKey)\n  //   if (promiseFromCache) {\n  //     return promiseFromCache\n  //   }\n  // }\n\n  // internals\n  var rpcRequest = rpcClient.createRequest(methodName, params)\n\n  sendHttpRequest(rpcRequest)\n\n  // add to cache\n  // if (useCache) {\n  //   cache.add(cacheKey, rpcRequest.promise)\n  // }\n\n  return rpcRequest.promise\n\n}\n\n// private\n\nfunction handleError (error, additionalInfo) {\n  console.warn(error || 'API Connection Error', additionalInfo)\n}\n\nfunction handleIncomingMessage (event) {\n  var message\n  try {\n    message = JSON.parse(event.data)\n  } catch (e) {\n    // non-valid JSON\n    handleError('Incoming message is not valid JSON format.', event.data)\n    return\n  }\n\n  if (message && !message.method) {\n    // has no method = it's a response\n    rpcClient.handleResponse(message)\n\n  } else if (message.method) {\n    if (message.id) {\n      // method call\n      // TODO: trigger onMethod event\n    } else {\n      // notification call\n      // TODO: trigger onNotification event\n    }\n  }\n}\n\nfunction sendHttpRequest (rpcRequest) {\n  // send request\n  fetch(DEFAULT_API_URL, {\n    body: JSON.stringify(rpcRequest.message),\n    method: 'POST',\n    headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}\n  }).then(function (response) {\n    return response.json()\n  }).then(function (data) {\n    rpcClient.handleResponse(data)\n    return null\n  }).catch(function (error) {\n    rpcRequest.cancel('Sorry, HTTP error occured. Please check your internet connection.')\n  })\n\n}","var\n  FALLBACK_MIME_TYPE = 'application/octet-stream',\n  EXTENSION_TO_MIME_TYPE = {\n    obj: 'text/plain',\n    dds: 'application/octet-stream',\n    dwg: 'application/acad',\n    dxf: 'application/dxf',\n    jpg: 'image/jpeg',\n    jpeg: 'image/jpeg',\n    png: 'image/png',\n    gif: 'image/gif',\n    txt: 'text/plain',\n    log: 'text/plain',\n    svg: 'svg+xml',\n    html: 'text/html',\n    htm: 'text/html',\n    js: 'application/javascript',\n    json: 'application/json',\n    md: 'text/markdown',\n    csv: 'text/csv',\n    gz:\t'application/x-gzip',\n    gzip:\t'application/x-gzip',\n    zip:'application/x-zip',\n    pdf: 'application/pdf',\n    '3ds': 'application/x-3ds'\n  }\n\nexport default function getMimeTypeFromFileName (filename) {\n  var\n    result = FALLBACK_MIME_TYPE,\n    extension\n\n  // get extension if file has one\n  if (filename.indexOf('.') > -1) {\n    extension = filename.split('.').pop().toLowerCase()\n    if (EXTENSION_TO_MIME_TYPE[extension]) {\n      // set mime type if it exists in the map\n      result = EXTENSION_TO_MIME_TYPE[extension]\n    }\n  }\n\n  return result\n}","import FormData from '../utils/io/form-data'\nimport runtime from '../core/runtime.js'\nimport callServices from '../utils/services/call.js'\nimport Promise from 'bluebird'\nimport fetch from '../utils/io/fetch.js'\nimport getMimeTypeFromFileName from '../utils/get-mime-type-from-filename.js'\n\n// main\n\nexport default function putToStore (files, options) {\n\n  if (!Array.isArray(files)) {\n\n    // upload single file\n\n    return putSingleFileToStore(files, options)\n\n  } else {\n\n    // upload multiple files and bundle progress events\n\n    var totalSize_ = 0\n    var progress_ = []\n    var onProgress_ = options.onProgress\n\n    return Promise.map(files, function(file, i){\n      totalSize_ += file.size\n      return putSingleFileToStore(file, {\n        onProgress: function(progress, total){\n          progress_[i] = progress\n          onProgress_(progress_.reduce(function(a, b) { return a+b; }, 0), totalSize_)\n        }\n      })\n    })\n\n  }\n\n}\n\n// private\n\nfunction putSingleFileToStore (file, options) {\n\n  options = options || {}\n  var fileName = file.name || options.fileName || 'unnamed.txt'\n  var onProgress = options.onProgress\n\n  // get credentials for S3\n  return callServices('S3.getCredentials', {\n    contentLength: file.size || file.length,\n    contentType: getMimeTypeFromFileName(fileName),\n    fileName: fileName\n  }).then(function (credentials) {\n\n    // upload directly to S3 using credentials\n    var fd = new FormData()\n    fd.append('key', credentials.key)\n    fd.append('AWSAccessKeyId', credentials.AWSAccessKeyId)\n    fd.append('acl', credentials.acl)\n    fd.append('Content-Type', credentials.contentType)\n    fd.append('policy', credentials.policy)\n    fd.append('signature', credentials.signature)\n    fd.append('success_action_status', '201')\n    if (credentials.contentEncoding) {\n      fd.append('Content-Encoding', credentials.contentEncoding)\n    }\n    //fd.append('success_action_redirect', 'http://google.com')\n    //fd.append('expiration',s3Credetials.plainPolicy.expiration)\n    fd.append('file', file)\n\n    if (runtime.isBrowser) {\n\n      // upload using XHR (gets progress info)\n      return new Promise(function(resolve, reject){\n        var xhr = new XMLHttpRequest()\n        xhr.crossOrigin = 'Anonymous'\n        xhr.onload = function (event) {\n          if (xhr.status >= 200 && xhr.status < 300) {\n            var key = getKeyFromS3Response(xhr.responseText)\n            key ? resolve(key) : reject ('Error Uploading File: '+xhr.responseText)\n          } else {\n            reject ('Error Uploading File: '+xhr.responseText)\n          }\n        }\n        xhr.onerror = function (event) {\n          reject(event)\n        }\n        if (onProgress) {\n          xhr.upload.addEventListener('progress', function(e){\n            onProgress(e.loaded, e.total)\n          }, false)\n        }\n        xhr.open('POST', credentials.url, true)\n        xhr.send(fd)\n      })\n\n    } else {\n\n      // upload using fetch\n      return fetch(credentials.url, {method: 'POST', body: fd}).then(function (res) {\n        return res.text()\n      }).then(function(str){\n        return getKeyFromS3Response(str) || Promise.reject('Error Uploading File: '+str)\n      })\n\n    }\n\n  })\n\n}\n\nfunction getKeyFromS3Response (str) {\n  // get file key from response\n  var s = /<Key>(.*)<\\/Key>/gi.exec(str)\n  return s ? '/'+s[1] : false\n}","import Promise from 'bluebird'\nimport putToStore from '../../storage/put.js'\n\n// configs\n\nvar EXTENSION_WHITE_LIST = [\n  // generic\n  '.json', '.buffer', '.js', '.md', '.txt', '.csv',\n  // 3d formats\n  '.obj', '.mtl', '.ifc', '.fbx', '.gltf', '.bin',\n  // 2d formats\n  '.jpg', '.jpeg', '.jpe', '.png', '.gif', '.tga', '.dds', '.svg', '.pdf', '.dxf'\n]\n\n// themes\n\nvar THEME = {\n  bright: {\n    box: 'background-color: rgba(255, 255, 255, 0.2); border: 1px dashed rgba(255, 255, 255, 0.7); border-radius: 2px;',\n    over: 'background-color: rgba(255, 255, 255, 0.3); border: 1px dashed rgba(255, 255, 255, 1); border-radius: 2px;'\n  },\n  dark: {\n    box: 'background-color: rgba(0, 0, 0, 0.2); border: 1px dashed rgba(0, 0, 0, 0.7); border-radius: 2px;',\n    over: 'background-color: rgba(0, 0, 0, 0.3); border: 1px dashed rgba(0, 0, 0, 1); border-radius: 2px;'\n  }\n}\n\n// main\n\nexport default function createFileDrop (args) {\n\n  var elementId = args.elementId\n  var onDrop = args.onDrop\n  var upload = args.upload !== undefined ? args.upload : true\n  var theme = args.theme !== undefined ? args.theme : 'bright'\n  var onProgress = args.onProgress\n\n  var el = document.getElementById(elementId)\n  if (THEME[theme]) el.setAttribute('style', THEME[theme].box)\n\n  function dragEnter (event) {\n    doNothing(event)\n    if (THEME[theme]) el.setAttribute('style', THEME[theme].over)\n  }\n\n  function dragLeave (event) {\n    doNothing(event)\n    if (THEME[theme]) el.setAttribute('style', THEME[theme].box)\n  }\n\n  function drop (event) {\n    doNothing(event)\n    getFilesFromDragAndDropEvent(event).then(function (files) {\n      if (!upload) {\n        // return files\n        onDrop(files)\n      } else {\n        // return keys & files\n        return putToStore(files, { onProgress: onProgress }).then(function(keys){\n          onDrop(keys, files)\n        })\n      }\n    }).catch(console.error)\n  }\n\n  /* events fired on the draggable target */\n  // document.addEventListener(\"drag\", function( event ) {}, false)\n  // document.addEventListener(\"dragstart\", function( event ) {}, false)\n  // document.addEventListener(\"dragend\", function( event ) {}, false)\n  // prevent events on window drop\n  window.addEventListener('dragover', doNothing, false)\n  window.addEventListener('drop', doNothing, false)\n  /* events fired on the drop targets */\n  el.addEventListener('dragover', function (event) {\n    doNothing(event)\n    event.dataTransfer.dropEffect = 'copy' // set cursor style\n  }, false)\n  el.addEventListener('dragenter', dragEnter, false)\n  el.addEventListener('dragleave', dragLeave, false)\n  el.addEventListener('dragend', dragLeave, false)\n  el.addEventListener('drop', drop, false)\n\n}\n\n// helpers\n\nfunction doNothing (event) {\n  event.stopPropagation()\n  event.preventDefault()\n}\n\nfunction getFilesFromDragAndDropEvent (event, options) {\n  // compatibility function to extract files\n\n  // API\n  options = options || {}\n  var warningCallback = options.onWarning || function () {}\n\n  // internals\n  var result\n  var dataTransfer = event.dataTransfer || event.originalEvent.dataTransfer\n\n  if (dataTransfer.items && dataTransfer.items.length) {\n    // more sophisticated drop API, supporting folders structures\n    // works in webkit browsers only\n    // get files with directories\n    //http://code.flickr.net/2012/12/10/drag-n-drop/\n    result = getFlatFileArrayFromItems(dataTransfer.items).then(function (files) {\n      return removeRootDir(filterValidFiles(files, warningCallback))\n    })\n\n  } else if (dataTransfer.files) {\n    // \"classic\" drag and drop api, not supporting folders\n    // check if user tries to dragdrop a folder = only one \"file\" with no extension\n    var isFolder = dataTransfer.files.length === 0 || (dataTransfer.files.length === 1 && dataTransfer.files[0].name.indexOf('.') < 0)\n    if (isFolder) {\n      result = Promise.reject('Sorry, but this browser doesn\\'t support drag&drop of folders. (use Chrome)')\n    } else {\n      // create Blobs from Files because in File name property is read only.\n      // but we may want file.name to be writable later.\n      var i, l, _file, file, files = []\n      for (i = 0, l = dataTransfer.files.length; i < l; i++) {\n        _file = dataTransfer.files[i]\n        file = new Blob([_file], {type: _file.type})\n        file.name = _file.name\n        files.push(file)\n      }\n      result = Promise.resolve(filterValidFiles(files, warningCallback))\n\n    }\n\n  } else {\n\n    result = Promise.reject('Event does not contain \"items\" nor \"files\" property.')\n\n  }\n\n  return result\n\n}\n\n// helpers\n\nfunction getFlatFileArrayFromItems (items) {\n\n  // get entries from items\n  var entries = [], item\n  for (var i = 0, l = items.length; i < l; i++) {\n    item = items[i]\n    entries[entries.length] = item.webkitGetAsEntry ? item.webkitGetAsEntry() : item.getAsFile()\n  }\n\n  // recursively parse directories and collect files\n  var files = []\n  return recursivelyParseEntries(entries, files).then(function () {\n    return files\n  })\n\n}\n\nfunction recursivelyParseEntries (entries, resultArray) {\n  return Promise.all(\n    entries.map(function (entry) {\n\n      if (entry.isFile) {\n\n        // convert File into Blob\n        return new Promise(function (resolve, reject) {\n          // add file to file array\n          entry\n            .file(function (_file) {\n              // create Blob from File because in File name property is read only.\n              // but we want file.name to include path so we need to overwrite it.\n              var file = new Blob([_file], {type: _file.type})\n              file.name = entry.fullPath.substring(1)\n              resultArray[resultArray.length] = file\n              resolve()\n            })\n        })\n\n      } else if (entry instanceof File) {\n\n        // create Blob from File because in File name property is read only.\n        // but we want file.name to include path so we need to overwrite it.\n        var file = new Blob([entry], {type: entry.type})\n        file.name = entry.name\n        // add file to file array\n        resultArray[resultArray.length] = file\n\n      } else if (entry.isDirectory) {\n\n        // read directory\n        return new Promise(function (resolve, reject) {\n          entry\n            .createReader()\n            .readEntries(function (_entries) {\n              resolve(recursivelyParseEntries(_entries, resultArray))\n            })\n        })\n\n      }\n    })\n  )\n}\n\nfunction filterValidFiles (_files, warningCallback) {\n  var file, fileName, extension, hasValidExtension, filteredFiles = []\n  for (var i = 0, l = _files.length; i < l; i++) {\n    file = _files[i]\n    fileName = file.name\n    if (typeof fileName === 'string') {\n      // ignore system files\n      if (fileName[0] === '.' || fileName.substring(0, 9) === '__MACOSX/') {\n        continue\n      }\n      // check extensions\n      extension = fileName.split('.').length > 1 ? '.' + fileName.split('.').pop().toLowerCase() : null\n      if (!extension) {\n        console.error('File ' + fileName + ' has no extension and will be ignored.')\n        warningCallback('File ' + fileName + ' has no extension and will be ignored.')\n      } else {\n        hasValidExtension = EXTENSION_WHITE_LIST.indexOf(extension) > -1\n        if (!hasValidExtension) {\n          console.error('File ' + fileName + ' is not supported and will be ignored.')\n          warningCallback('File ' + fileName + ' is not supported and will be ignored.')\n        } else {\n          filteredFiles[filteredFiles.length] = file\n        }\n      }\n    }\n  }\n  return filteredFiles\n}\n\nfunction removeRootDir (files) {\n  // get root dir from first file\n  var rootDir, i, l\n  if (files.length && files[0].name && files[0].name.indexOf('/') > -1) {\n    rootDir = files[0].name.split('/')[0]\n  } else {\n    return files\n  }\n\n  // check if all files have the same root dir\n  var hasSameRootDir\n  for (i = 1, l = files.length; i < l; i++) {\n    hasSameRootDir = files[i].name && files[i].name.indexOf('/') > -1 && files[i].name.split('/')[0] === rootDir\n    if (!hasSameRootDir) {\n      return files\n    }\n  }\n\n  // remove root dir from file names\n  for (i = 0, l = files.length; i < l; i++) {\n    files[i].name = files[i].name.substring(rootDir.length + 1)\n  }\n\n  // iterate recursively until all equal leading directories are removed\n  return removeRootDir(files)\n\n}","// from https://github.com/jbgutierrez/path-parse\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\n\nfunction parsePath (path) {\n  if (typeof path !== 'string') {\n    throw new TypeError(\n      \"Parameter 'path' must be a string, not \" + typeof path\n    );\n  }\n  var allParts = splitPathRe.exec(path).slice(1)\n  if (!allParts || allParts.length !== 4) {\n    throw new TypeError(\"Invalid path '\" + path + \"'\");\n  }\n  allParts[2] = allParts[2] || '';\n  allParts[3] = allParts[3] || '';\n\n  return {\n    root: allParts[0],\n    dir: allParts[0] + allParts[1].slice(0, -1),\n    base: allParts[2],\n    ext: allParts[3],\n    name: allParts[2].slice(0, allParts[2].length - allParts[3].length)\n  }\n}\n\nexport default {\n  parse: parsePath\n}","// source: https://github.com/petkaantonov/urlparser\n// modified for browser compatibility\n\n/*\n Copyright (c) 2014 Petka Antonov\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n */\nexport default function Url() {\n  //For more efficient internal representation and laziness.\n  //The non-underscore versions of these properties are accessor functions\n  //defined on the prototype.\n  this._protocol = null;\n  this._href = \"\";\n  this._port = -1;\n  this._query = null;\n\n  this.auth = null;\n  this.slashes = null;\n  this.host = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.pathname = null;\n\n  this._prependSlash = false;\n}\n\nUrl.prototype.parse =\n  function Url$parse(str, parseQueryString, hostDenotesSlash, disableAutoEscapeChars) {\n    if (typeof str !== \"string\") {\n      throw new TypeError(\"Parameter 'url' must be a string, not \" +\n        typeof str);\n    }\n    if (str.substr(0,2) === '//' && typeof window !== 'undefined' && window.location && window.location.protocol) {\n      str = window.location.protocol + str\n    }\n    var start = 0;\n    var end = str.length - 1;\n\n    //Trim leading and trailing ws\n    while (str.charCodeAt(start) <= 0x20 /*' '*/) start++;\n    while (str.charCodeAt(end) <= 0x20 /*' '*/) end--;\n\n    start = this._parseProtocol(str, start, end);\n\n    //Javascript doesn't have host\n    if (this._protocol !== \"javascript\") {\n      start = this._parseHost(str, start, end, hostDenotesSlash);\n      var proto = this._protocol;\n      if (!this.hostname &&\n        (this.slashes || (proto && !slashProtocols[proto]))) {\n        this.hostname = this.host = \"\";\n      }\n    }\n\n    if (start <= end) {\n      var ch = str.charCodeAt(start);\n\n      if (ch === 0x2F /*'/'*/ || ch === 0x5C /*'\\'*/) {\n        this._parsePath(str, start, end, disableAutoEscapeChars);\n      }\n      else if (ch === 0x3F /*'?'*/) {\n        this._parseQuery(str, start, end, disableAutoEscapeChars);\n      }\n      else if (ch === 0x23 /*'#'*/) {\n        this._parseHash(str, start, end, disableAutoEscapeChars);\n      }\n      else if (this._protocol !== \"javascript\") {\n        this._parsePath(str, start, end, disableAutoEscapeChars);\n      }\n      else { //For javascript the pathname is just the rest of it\n        this.pathname = str.slice(start, end + 1 );\n      }\n\n    }\n\n    if (!this.pathname && this.hostname &&\n      this._slashProtocols[this._protocol]) {\n      this.pathname = \"/\";\n    }\n\n    if (parseQueryString) {\n      var search = this.search;\n      if (search == null) {\n        search = this.search = \"\";\n      }\n      if (search.charCodeAt(0) === 0x3F /*'?'*/) {\n        search = search.slice(1);\n      }\n      //This calls a setter function, there is no .query data property\n      this.query = Url.queryString.parse(search);\n    }\n  };\n\nUrl.prototype.resolve = function Url$resolve(relative) {\n  return this.resolveObject(Url.parse(relative, false, true)).format();\n};\n\nUrl.prototype.format = function Url$format() {\n  var auth = this.auth || \"\";\n\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, \":\");\n    auth += \"@\";\n  }\n\n  var protocol = this.protocol || \"\";\n  var pathname = this.pathname || \"\";\n  var hash = this.hash || \"\";\n  var search = this.search || \"\";\n  var query = \"\";\n  var hostname = this.hostname || \"\";\n  var port = this.port || \"\";\n  var host = false;\n  var scheme = \"\";\n\n  //Cache the result of the getter function\n  var q = this.query;\n  if (q && typeof q === \"object\") {\n    query = Url.queryString.stringify(q);\n  }\n\n  if (!search) {\n    search = query ? \"?\" + query : \"\";\n  }\n\n  if (protocol && protocol.charCodeAt(protocol.length - 1) !== 0x3A /*':'*/)\n    protocol += \":\";\n\n  if (this.host) {\n    host = auth + this.host;\n  }\n  else if (hostname) {\n    var ip6 = hostname.indexOf(\":\") > -1;\n    if (ip6) hostname = \"[\" + hostname + \"]\";\n    host = auth + hostname + (port ? \":\" + port : \"\");\n  }\n\n  var slashes = this.slashes ||\n    ((!protocol ||\n    slashProtocols[protocol]) && host !== false);\n\n\n  if (protocol) scheme = protocol + (slashes ? \"//\" : \"\");\n  else if (slashes) scheme = \"//\";\n\n  if (slashes && pathname && pathname.charCodeAt(0) !== 0x2F /*'/'*/) {\n    pathname = \"/\" + pathname;\n  }\n  if (search && search.charCodeAt(0) !== 0x3F /*'?'*/)\n    search = \"?\" + search;\n  if (hash && hash.charCodeAt(0) !== 0x23 /*'#'*/)\n    hash = \"#\" + hash;\n\n  pathname = escapePathName(pathname);\n  search = escapeSearch(search);\n\n  return scheme + (host === false ? \"\" : host) + pathname + search + hash;\n};\n\nUrl.prototype.resolveObject = function Url$resolveObject(relative) {\n  if (typeof relative === \"string\")\n    relative = Url.parse(relative, false, true);\n\n  var result = this._clone();\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there\"s nothing left to do here.\n  if (!relative.href) {\n    result._href = \"\";\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative._protocol) {\n    relative._copyPropsTo(result, true);\n\n    if (slashProtocols[result._protocol] &&\n      result.hostname && !result.pathname) {\n      result.pathname = \"/\";\n    }\n    result._href = \"\";\n    return result;\n  }\n\n  if (relative._protocol && relative._protocol !== result._protocol) {\n    // if it\"s a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it\"s not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that\"s known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashProtocols[relative._protocol]) {\n      relative._copyPropsTo(result, false);\n      result._href = \"\";\n      return result;\n    }\n\n    result._protocol = relative._protocol;\n    if (!relative.host && relative._protocol !== \"javascript\") {\n      var relPath = (relative.pathname || \"\").split(\"/\");\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = \"\";\n      if (!relative.hostname) relative.hostname = \"\";\n      if (relPath[0] !== \"\") relPath.unshift(\"\");\n      if (relPath.length < 2) relPath.unshift(\"\");\n      result.pathname = relPath.join(\"/\");\n    } else {\n      result.pathname = relative.pathname;\n    }\n\n    result.search = relative.search;\n    result.host = relative.host || \"\";\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result._port = relative._port;\n    result.slashes = result.slashes || relative.slashes;\n    result._href = \"\";\n    return result;\n  }\n\n  var isSourceAbs =\n    (result.pathname && result.pathname.charCodeAt(0) === 0x2F /*'/'*/);\n  var isRelAbs = (\n    relative.host ||\n    (relative.pathname &&\n    relative.pathname.charCodeAt(0) === 0x2F /*'/'*/)\n  );\n  var mustEndAbs = (isRelAbs || isSourceAbs ||\n  (result.host && relative.pathname));\n\n  var removeAllDots = mustEndAbs;\n\n  var srcPath = result.pathname && result.pathname.split(\"/\") || [];\n  var relPath = relative.pathname && relative.pathname.split(\"/\") || [];\n  var psychotic = result._protocol && !slashProtocols[result._protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = \"\";\n    result._port = -1;\n    if (result.host) {\n      if (srcPath[0] === \"\") srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = \"\";\n    if (relative._protocol) {\n      relative.hostname = \"\";\n      relative._port = -1;\n      if (relative.host) {\n        if (relPath[0] === \"\") relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = \"\";\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === \"\" || srcPath[0] === \"\");\n  }\n\n  if (isRelAbs) {\n    // it\"s absolute.\n    result.host = relative.host ?\n      relative.host : result.host;\n    result.hostname = relative.hostname ?\n      relative.hostname : result.hostname;\n    result.search = relative.search;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it\"s relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n  } else if (relative.search) {\n    // just pull out the search.\n    // like href=\"?foo\".\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especialy happens in cases like\n      //url.resolveObject(\"mailto:local1@domain1\", \"local2@domain2\")\n      var authInHost = result.host && result.host.indexOf(\"@\") > 0 ?\n        result.host.split(\"@\") : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result._href = \"\";\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we\"ve already handled the other stuff above.\n    result.pathname = null;\n    result._href = \"\";\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n  (result.host || relative.host) && (last === \".\" || last === \"..\") ||\n  last === \"\");\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === \".\") {\n      srcPath.splice(i, 1);\n    } else if (last === \"..\") {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift(\"..\");\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== \"\" &&\n    (!srcPath[0] || srcPath[0].charCodeAt(0) !== 0x2F /*'/'*/)) {\n    srcPath.unshift(\"\");\n  }\n\n  if (hasTrailingSlash && (srcPath.join(\"/\").substr(-1) !== \"/\")) {\n    srcPath.push(\"\");\n  }\n\n  var isAbsolute = srcPath[0] === \"\" ||\n    (srcPath[0] && srcPath[0].charCodeAt(0) === 0x2F /*'/'*/);\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? \"\" :\n      srcPath.length ? srcPath.shift() : \"\";\n    //occationaly the auth can get stuck only in host\n    //this especialy happens in cases like\n    //url.resolveObject(\"mailto:local1@domain1\", \"local2@domain2\")\n    var authInHost = result.host && result.host.indexOf(\"@\") > 0 ?\n      result.host.split(\"@\") : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift(\"\");\n  }\n\n  result.pathname = srcPath.length === 0 ? null : srcPath.join(\"/\");\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result._href = \"\";\n  return result;\n};\n\nvar escapePathName = Url.prototype._escapePathName =\n  function Url$_escapePathName(pathname) {\n    if (!containsCharacter2(pathname, 0x23 /*'#'*/, 0x3F /*'?'*/)) {\n      return pathname;\n    }\n    //Avoid closure creation to keep this inlinable\n    return _escapePath(pathname);\n  };\n\nvar escapeSearch = Url.prototype._escapeSearch =\n  function Url$_escapeSearch(search) {\n    if (!containsCharacter2(search, 0x23 /*'#'*/, -1)) return search;\n    //Avoid closure creation to keep this inlinable\n    return _escapeSearch(search);\n  };\n\nUrl.prototype._parseProtocol = function Url$_parseProtocol(str, start, end) {\n  var doLowerCase = false;\n  var protocolCharacters = this._protocolCharacters;\n\n  for (var i = start; i <= end; ++i) {\n    var ch = str.charCodeAt(i);\n\n    if (ch === 0x3A /*':'*/) {\n      var protocol = str.slice(start, i);\n      if (doLowerCase) protocol = protocol.toLowerCase();\n      this._protocol = protocol;\n      return i + 1;\n    }\n    else if (protocolCharacters[ch] === 1) {\n      if (ch < 0x61 /*'a'*/)\n        doLowerCase = true;\n    }\n    else {\n      return start;\n    }\n\n  }\n  return start;\n};\n\nUrl.prototype._parseAuth = function Url$_parseAuth(str, start, end, decode) {\n  var auth = str.slice(start, end + 1);\n  if (decode) {\n    auth = decodeURIComponent(auth);\n  }\n  this.auth = auth;\n};\n\nUrl.prototype._parsePort = function Url$_parsePort(str, start, end) {\n  //Internal format is integer for more efficient parsing\n  //and for efficient trimming of leading zeros\n  var port = 0;\n  //Distinguish between :0 and : (no port number at all)\n  var hadChars = false;\n  var validPort = true;\n\n  for (var i = start; i <= end; ++i) {\n    var ch = str.charCodeAt(i);\n\n    if (0x30 /*'0'*/ <= ch && ch <= 0x39 /*'9'*/) {\n      port = (10 * port) + (ch - 0x30 /*'0'*/);\n      hadChars = true;\n    }\n    else {\n      validPort = false;\n      if (ch === 0x5C/*'\\'*/ || ch === 0x2F/*'/'*/) {\n        validPort = true;\n      }\n      break;\n    }\n\n  }\n  if ((port === 0 && !hadChars) || !validPort) {\n    if (!validPort) {\n      this._port = -2;\n    }\n    return 0;\n  }\n\n  this._port = port;\n  return i - start;\n};\n\nUrl.prototype._parseHost =\n  function Url$_parseHost(str, start, end, slashesDenoteHost) {\n    var hostEndingCharacters = this._hostEndingCharacters;\n    var first = str.charCodeAt(start);\n    var second = str.charCodeAt(start + 1);\n    if ((first === 0x2F /*'/'*/ || first === 0x5C /*'\\'*/) &&\n      (second === 0x2F /*'/'*/ || second === 0x5C /*'\\'*/)) {\n      this.slashes = true;\n\n      //The string starts with //\n      if (start === 0) {\n        //The string is just \"//\"\n        if (end < 2) return start;\n        //If slashes do not denote host and there is no auth,\n        //there is no host when the string starts with //\n        var hasAuth =\n          containsCharacter(str, 0x40 /*'@'*/, 2, hostEndingCharacters);\n        if (!hasAuth && !slashesDenoteHost) {\n          this.slashes = null;\n          return start;\n        }\n      }\n      //There is a host that starts after the //\n      start += 2;\n    }\n    //If there is no slashes, there is no hostname if\n    //1. there was no protocol at all\n    else if (!this._protocol ||\n      //2. there was a protocol that requires slashes\n      //e.g. in 'http:asd' 'asd' is not a hostname\n      slashProtocols[this._protocol]\n    ) {\n      return start;\n    }\n\n    var doLowerCase = false;\n    var idna = false;\n    var hostNameStart = start;\n    var hostNameEnd = end;\n    var lastCh = -1;\n    var portLength = 0;\n    var charsAfterDot = 0;\n    var authNeedsDecoding = false;\n\n    var j = -1;\n\n    //Find the last occurrence of an @-sign until hostending character is met\n    //also mark if decoding is needed for the auth portion\n    for (var i = start; i <= end; ++i) {\n      var ch = str.charCodeAt(i);\n\n      if (ch === 0x40 /*'@'*/) {\n        j = i;\n      }\n      //This check is very, very cheap. Unneeded decodeURIComponent is very\n      //very expensive\n      else if (ch === 0x25 /*'%'*/) {\n        authNeedsDecoding = true;\n      }\n      else if (hostEndingCharacters[ch] === 1) {\n        break;\n      }\n    }\n\n    //@-sign was found at index j, everything to the left from it\n    //is auth part\n    if (j > -1) {\n      this._parseAuth(str, start, j - 1, authNeedsDecoding);\n      //hostname starts after the last @-sign\n      start = hostNameStart = j + 1;\n    }\n\n    //Host name is starting with a [\n    if (str.charCodeAt(start) === 0x5B /*'['*/) {\n      for (var i = start + 1; i <= end; ++i) {\n        var ch = str.charCodeAt(i);\n\n        //Assume valid IP6 is between the brackets\n        if (ch === 0x5D /*']'*/) {\n          if (str.charCodeAt(i + 1) === 0x3A /*':'*/) {\n            portLength = this._parsePort(str, i + 2, end) + 1;\n          }\n          var hostname = str.slice(start + 1, i).toLowerCase();\n          this.hostname = hostname;\n          this.host = this._port > 0 ?\n            \"[\" + hostname + \"]:\" + this._port :\n            \"[\" + hostname + \"]\";\n          this.pathname = \"/\";\n          return i + portLength + 1;\n        }\n      }\n      //Empty hostname, [ starts a path\n      return start;\n    }\n\n    for (var i = start; i <= end; ++i) {\n      if (charsAfterDot > 62) {\n        this.hostname = this.host = str.slice(start, i);\n        return i;\n      }\n      var ch = str.charCodeAt(i);\n\n      if (ch === 0x3A /*':'*/) {\n        portLength = this._parsePort(str, i + 1, end) + 1;\n        hostNameEnd = i - 1;\n        break;\n      }\n      else if (ch < 0x61 /*'a'*/) {\n        if (ch === 0x2E /*'.'*/) {\n          //Node.js ignores this error\n          /*\n           if (lastCh === DOT || lastCh === -1) {\n           this.hostname = this.host = \"\";\n           return start;\n           }\n           */\n          charsAfterDot = -1;\n        }\n        else if (0x41 /*'A'*/ <= ch && ch <= 0x5A /*'Z'*/) {\n          doLowerCase = true;\n        }\n        //Valid characters other than ASCII letters -, _, +, 0-9\n        else if (!(ch === 0x2D /*'-'*/ ||\n          ch === 0x5F /*'_'*/ ||\n          ch === 0x2B /*'+'*/ ||\n          (0x30 /*'0'*/ <= ch && ch <= 0x39 /*'9'*/))\n        ) {\n          if (hostEndingCharacters[ch] === 0 &&\n            this._noPrependSlashHostEnders[ch] === 0) {\n            this._prependSlash = true;\n          }\n          hostNameEnd = i - 1;\n          break;\n        }\n      }\n      else if (ch >= 0x7B /*'{'*/) {\n        if (ch <= 0x7E /*'~'*/) {\n          if (this._noPrependSlashHostEnders[ch] === 0) {\n            this._prependSlash = true;\n          }\n          hostNameEnd = i - 1;\n          break;\n        }\n        idna = true;\n      }\n      lastCh = ch;\n      charsAfterDot++;\n    }\n\n    //Node.js ignores this error\n    /*\n     if (lastCh === DOT) {\n     hostNameEnd--;\n     }\n     */\n\n    if (hostNameEnd + 1 !== start &&\n      hostNameEnd - hostNameStart <= 256) {\n      var hostname = str.slice(hostNameStart, hostNameEnd + 1);\n      if (doLowerCase) hostname = hostname.toLowerCase();\n      this.hostname = hostname;\n      this.host = this._port > 0 ? hostname + \":\" + this._port : hostname;\n    }\n\n    return hostNameEnd + 1 + portLength;\n\n  };\n\nUrl.prototype._copyPropsTo = function Url$_copyPropsTo(input, noProtocol) {\n  if (!noProtocol) {\n    input._protocol = this._protocol;\n  }\n  input._href = this._href;\n  input._port = this._port;\n  input._prependSlash = this._prependSlash;\n  input.auth = this.auth;\n  input.slashes = this.slashes;\n  input.host = this.host;\n  input.hostname = this.hostname;\n  input.hash = this.hash;\n  input.search = this.search;\n  input.pathname = this.pathname;\n};\n\nUrl.prototype._clone = function Url$_clone() {\n  var ret = new Url();\n  ret._protocol = this._protocol;\n  ret._href = this._href;\n  ret._port = this._port;\n  ret._prependSlash = this._prependSlash;\n  ret.auth = this.auth;\n  ret.slashes = this.slashes;\n  ret.host = this.host;\n  ret.hostname = this.hostname;\n  ret.hash = this.hash;\n  ret.search = this.search;\n  ret.pathname = this.pathname;\n  return ret;\n};\n\nUrl.prototype._getComponentEscaped =\n  function Url$_getComponentEscaped(str, start, end, isAfterQuery) {\n    var cur = start;\n    var i = start;\n    var ret = \"\";\n    var autoEscapeMap = isAfterQuery ?\n      this._afterQueryAutoEscapeMap : this._autoEscapeMap;\n    for (; i <= end; ++i) {\n      var ch = str.charCodeAt(i);\n      var escaped = autoEscapeMap[ch];\n\n      if (escaped !== \"\" && escaped !== undefined) {\n        if (cur < i) ret += str.slice(cur, i);\n        ret += escaped;\n        cur = i + 1;\n      }\n    }\n    if (cur < i + 1) ret += str.slice(cur, i);\n    return ret;\n  };\n\nUrl.prototype._parsePath =\n  function Url$_parsePath(str, start, end, disableAutoEscapeChars) {\n    var pathStart = start;\n    var pathEnd = end;\n    var escape = false;\n    var autoEscapeCharacters = this._autoEscapeCharacters;\n    var prePath = this._port === -2 ? \"/:\" : \"\";\n\n    for (var i = start; i <= end; ++i) {\n      var ch = str.charCodeAt(i);\n      if (ch === 0x23 /*'#'*/) {\n        this._parseHash(str, i, end, disableAutoEscapeChars);\n        pathEnd = i - 1;\n        break;\n      }\n      else if (ch === 0x3F /*'?'*/) {\n        this._parseQuery(str, i, end, disableAutoEscapeChars);\n        pathEnd = i - 1;\n        break;\n      }\n      else if (!disableAutoEscapeChars && !escape && autoEscapeCharacters[ch] === 1) {\n        escape = true;\n      }\n    }\n\n    if (pathStart > pathEnd) {\n      this.pathname = prePath === \"\" ? \"/\" : prePath;\n      return;\n    }\n\n    var path;\n    if (escape) {\n      path = this._getComponentEscaped(str, pathStart, pathEnd, false);\n    }\n    else {\n      path = str.slice(pathStart, pathEnd + 1);\n    }\n    this.pathname = prePath === \"\"\n      ? (this._prependSlash ? \"/\" + path : path)\n      : prePath + path;\n  };\n\nUrl.prototype._parseQuery = function Url$_parseQuery(str, start, end, disableAutoEscapeChars) {\n  var queryStart = start;\n  var queryEnd = end;\n  var escape = false;\n  var autoEscapeCharacters = this._autoEscapeCharacters;\n\n  for (var i = start; i <= end; ++i) {\n    var ch = str.charCodeAt(i);\n\n    if (ch === 0x23 /*'#'*/) {\n      this._parseHash(str, i, end, disableAutoEscapeChars);\n      queryEnd = i - 1;\n      break;\n    }\n    else if (!disableAutoEscapeChars && !escape && autoEscapeCharacters[ch] === 1) {\n      escape = true;\n    }\n  }\n\n  if (queryStart > queryEnd) {\n    this.search = \"\";\n    return;\n  }\n\n  var query;\n  if (escape) {\n    query = this._getComponentEscaped(str, queryStart, queryEnd, true);\n  }\n  else {\n    query = str.slice(queryStart, queryEnd + 1);\n  }\n  this.search = query;\n};\n\nUrl.prototype._parseHash = function Url$_parseHash(str, start, end, disableAutoEscapeChars) {\n  if (start > end) {\n    this.hash = \"\";\n    return;\n  }\n\n  this.hash = disableAutoEscapeChars ?\n    str.slice(start, end + 1) : this._getComponentEscaped(str, start, end, true);\n};\n\nObject.defineProperty(Url.prototype, \"port\", {\n  get: function() {\n    if (this._port >= 0) {\n      return (\"\" + this._port);\n    }\n    return null;\n  },\n  set: function(v) {\n    if (v == null) {\n      this._port = -1;\n    }\n    else {\n      this._port = parseInt(v, 10);\n    }\n  }\n});\n\nObject.defineProperty(Url.prototype, \"query\", {\n  get: function() {\n    var query = this._query;\n    if (query != null) {\n      return query;\n    }\n    var search = this.search;\n\n    if (search) {\n      if (search.charCodeAt(0) === 0x3F /*'?'*/) {\n        search = search.slice(1);\n      }\n      if (search !== \"\") {\n        this._query = search;\n        return search;\n      }\n    }\n    return search;\n  },\n  set: function(v) {\n    this._query = v;\n  }\n});\n\nObject.defineProperty(Url.prototype, \"path\", {\n  get: function() {\n    var p = this.pathname || \"\";\n    var s = this.search || \"\";\n    if (p || s) {\n      return p + s;\n    }\n    return (p == null && s) ? (\"/\" + s) : null;\n  },\n  set: function() {}\n});\n\nObject.defineProperty(Url.prototype, \"protocol\", {\n  get: function() {\n    var proto = this._protocol;\n    return proto ? proto + \":\" : proto;\n  },\n  set: function(v) {\n    if (typeof v === \"string\") {\n      var end = v.length - 1;\n      if (v.charCodeAt(end) === 0x3A /*':'*/) {\n        this._protocol = v.slice(0, end);\n      }\n      else {\n        this._protocol = v;\n      }\n    }\n    else if (v == null) {\n      this._protocol = null;\n    }\n  }\n});\n\nObject.defineProperty(Url.prototype, \"href\", {\n  get: function() {\n    var href = this._href;\n    if (!href) {\n      href = this._href = this.format();\n    }\n    return href;\n  },\n  set: function(v) {\n    this._href = v;\n  }\n});\n\nUrl.parse = function Url$Parse(str, parseQueryString, hostDenotesSlash, disableAutoEscapeChars) {\n  if (str instanceof Url) return str;\n  var ret = new Url();\n  ret.parse(str, !!parseQueryString, !!hostDenotesSlash, !!disableAutoEscapeChars);\n  return ret;\n};\n\nUrl.format = function Url$Format(obj) {\n  if (typeof obj === \"string\") {\n    obj = Url.parse(obj);\n  }\n  if (!(obj instanceof Url)) {\n    return Url.prototype.format.call(obj);\n  }\n  return obj.format();\n};\n\nUrl.resolve = function Url$Resolve(source, relative) {\n  return Url.parse(source, false, true).resolve(relative);\n};\n\nUrl.resolveObject = function Url$ResolveObject(source, relative) {\n  if (!source) return relative;\n  return Url.parse(source, false, true).resolveObject(relative);\n};\n\nfunction _escapePath(pathname) {\n  return pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n}\n\nfunction _escapeSearch(search) {\n  return search.replace(/#/g, function(match) {\n    return encodeURIComponent(match);\n  });\n}\n\n//Search `char1` (integer code for a character) in `string`\n//starting from `fromIndex` and ending at `string.length - 1`\n//or when a stop character is found\nfunction containsCharacter(string, char1, fromIndex, stopCharacterTable) {\n  var len = string.length;\n  for (var i = fromIndex; i < len; ++i) {\n    var ch = string.charCodeAt(i);\n\n    if (ch === char1) {\n      return true;\n    }\n    else if (stopCharacterTable[ch] === 1) {\n      return false;\n    }\n  }\n  return false;\n}\n\n//See if `char1` or `char2` (integer codes for characters)\n//is contained in `string`\nfunction containsCharacter2(string, char1, char2) {\n  for (var i = 0, len = string.length; i < len; ++i) {\n    var ch = string.charCodeAt(i);\n    if (ch === char1 || ch === char2) return true;\n  }\n  return false;\n}\n\n//Makes an array of 128 uint8's which represent boolean values.\n//Spec is an array of ascii code points or ascii code point ranges\n//ranges are expressed as [start, end]\n\n//Create a table with the characters 0x30-0x39 (decimals '0' - '9') and\n//0x7A (lowercaseletter 'z') as `true`:\n//\n//var a = makeAsciiTable([[0x30, 0x39], 0x7A]);\n//a[0x30]; //1\n//a[0x15]; //0\n//a[0x35]; //1\nfunction makeAsciiTable(spec) {\n  var ret = new Uint8Array(128);\n  spec.forEach(function(item){\n    if (typeof item === \"number\") {\n      ret[item] = 1;\n    }\n    else {\n      var start = item[0];\n      var end = item[1];\n      for (var j = start; j <= end; ++j) {\n        ret[j] = 1;\n      }\n    }\n  });\n\n  return ret;\n}\n\n\nvar autoEscape = [\"<\", \">\", \"\\\"\", \"`\", \" \", \"\\r\", \"\\n\",\n  \"\\t\", \"{\", \"}\", \"|\", \"\\\\\", \"^\", \"`\", \"'\"];\n\nvar autoEscapeMap = new Array(128);\n\n\n\nfor (var i = 0, len = autoEscapeMap.length; i < len; ++i) {\n  autoEscapeMap[i] = \"\";\n}\n\nfor (var i = 0, len = autoEscape.length; i < len; ++i) {\n  var c = autoEscape[i];\n  var esc = encodeURIComponent(c);\n  if (esc === c) {\n    esc = escape(c);\n  }\n  autoEscapeMap[c.charCodeAt(0)] = esc;\n}\nvar afterQueryAutoEscapeMap = autoEscapeMap.slice();\nautoEscapeMap[0x5C /*'\\'*/] = \"/\";\n\nvar slashProtocols = Url.prototype._slashProtocols = {\n  http: true,\n  https: true,\n  gopher: true,\n  file: true,\n  ftp: true,\n\n  \"http:\": true,\n  \"https:\": true,\n  \"gopher:\": true,\n  \"file:\": true,\n  \"ftp:\": true\n};\n\n//Optimize back from normalized object caused by non-identifier keys\nfunction f(){}\nf.prototype = slashProtocols;\n\nUrl.prototype._protocolCharacters = makeAsciiTable([\n  [0x61 /*'a'*/, 0x7A /*'z'*/],\n  [0x41 /*'A'*/, 0x5A /*'Z'*/],\n  0x2E /*'.'*/, 0x2B /*'+'*/, 0x2D /*'-'*/\n]);\n\nUrl.prototype._hostEndingCharacters = makeAsciiTable([\n  0x23 /*'#'*/, 0x3F /*'?'*/, 0x2F /*'/'*/, 0x5C /*'\\'*/\n]);\n\nUrl.prototype._autoEscapeCharacters = makeAsciiTable(\n  autoEscape.map(function(v) {\n    return v.charCodeAt(0);\n  })\n);\n\n//If these characters end a host name, the path will not be prepended a /\nUrl.prototype._noPrependSlashHostEnders = makeAsciiTable(\n  [\n    \"<\", \">\", \"'\", \"`\", \" \", \"\\r\",\n    \"\\n\", \"\\t\", \"{\", \"}\", \"|\",\n    \"^\", \"`\", \"\\\"\", \"%\", \";\"\n  ].map(function(v) {\n    return v.charCodeAt(0);\n  })\n);\n\nUrl.prototype._autoEscapeMap = autoEscapeMap;\nUrl.prototype._afterQueryAutoEscapeMap = afterQueryAutoEscapeMap;","import pathUtil   from '../path.js'\nimport urlUtil    from '../url.js'\n\n// configs\n\nvar HEADER_BYTE_LENGTH = 16\nvar MAGIC_NUMBER = 0x41443344 // AD3D encoded as ASCII characters in hex\nvar VERSION = 1\nvar TEXTURE_PATH_KEYS = [\n  // source\n  'mapDiffuseSource',\n  'mapSpecularSource',\n  'mapNormalSource',\n  'mapAlphaSource',\n  'mapLightSource',\n  // hi-res\n  'mapDiffuse',\n  'mapSpecular',\n  'mapNormal',\n  'mapAlpha',\n  'mapLight',\n  // preview\n  'mapDiffusePreview',\n  'mapSpecularPreview',\n  'mapNormalPreview',\n  'mapAlphaPreview',\n  'mapLightPreview'\n]\n// TODO: use StringDecoder in Node environment\nvar textDecoder = window && window.TextDecoder ? new window.TextDecoder('utf-16') : makeUtf16Decoder()\n\n// public methods\n\nexport default function decodeBuffer (buffer, options) {\n\n  // API\n  options = options || {}\n  var url = options.url\n\n  var parsedUrl = urlUtil.parse(url)\n  var rootDir = pathUtil.parse(parsedUrl.path || '').dir\n  var origin = parsedUrl.protocol + '//' + parsedUrl.host\n\n  // check buffer type\n  if (!buffer) {\n    return Promise.reject('Missing buffer parameter.')\n  } else if (typeof Buffer !== 'undefined' && buffer instanceof Buffer) {\n    // convert node buffer to arrayBuffer\n    buffer = buffer.buffer.slice(buffer.byteOffset, buffer.byteOffset + buffer.byteLength)\n  }\n\n  // internals\n  var headerArray = new Int32Array(buffer, 0, HEADER_BYTE_LENGTH / 4)\n  var magicNumber = headerArray[0]\n  var version = headerArray[1]\n  var structureByteLength = headerArray[2]\n  var payloadByteLength = headerArray[3]\n  var expectedFileByteLength = HEADER_BYTE_LENGTH + structureByteLength + payloadByteLength\n\n  // validation warnings\n\n  if (magicNumber !== MAGIC_NUMBER) {\n    console.error('File header error: Wrong magic number. File is probably not data3d buffer format.')\n  }\n  if (version !== VERSION) {\n    console.error('File header error: Wrong version number: ' + version + '. Parser supports version: ' + VERSION)\n  }\n\n  // validation errors\n\n  if (buffer.byteLength !== expectedFileByteLength) {\n    var errorMessage = 'Can not parse Data3d buffer. Wrong buffer size: ' + buffer.byteLength + ' Expected: ' + expectedFileByteLength\n    console.error(errorMessage)\n    return Promise.reject(errorMessage)\n  }\n\n  // parse structure info\n\n  var structureArray = new Uint16Array(buffer, HEADER_BYTE_LENGTH, structureByteLength / 2)\n  var structureString = textDecoder.decode(structureArray)\n  var structure\n  try {\n    structure = JSON.parse(structureString)\n  } catch (e) {\n    return Promise.reject(e)\n  }\n\n  // add geometry arrays to data3d\n\n  var payloadByteOffset = HEADER_BYTE_LENGTH + structureByteLength\n  traverseData3d(structure.data3d, function (data3d) {\n\n    // map typed arrays to payload area in file buffer\n    mapArraysToBuffer(data3d, buffer, payloadByteOffset, url)\n\n    //  convert relative material keys into absolute once\n    if (origin && data3d.materials) convertTextureKeys(data3d, origin, rootDir)\n\n  })\n\n  return Promise.resolve(structure.data3d)\n\n}\n\n// text decoder shim\nfunction makeUtf16Decoder () {\n  return {\n\n    decode: function decodeText (a) {\n      var\n        string = '',\n        // ignore any initial character other than '{' = 123 and '[' = 91 (>> bug #9818)\n        i = a[0] === 123 || a[1] === 91 ? 0 : 1,\n        l20 = a.length - 20,\n        l2 = a.length\n      // passing 20 arguments into fromCharCode function provides fastest performance\n      // (based on practical performance testing)\n      for (; i < l20; i += 20) {\n        string += String.fromCharCode(\n          a[i], a[i + 1], a[i + 2], a[i + 3], a[i + 4], a[i + 5], a[i + 6], a[i + 7], a[i + 8], a[i + 9],\n          a[i + 10], a[i + 11], a[i + 12], a[i + 13], a[i + 14], a[i + 15], a[i + 16], a[i + 17], a[i + 18], a[i + 19]\n        )\n      }\n      // the rest we do char by char\n      for (; i < l2; i++) {\n        string += String.fromCharCode(a[i])\n      }\n      return string\n    }\n\n  }\n}\n\nfunction convertTextureKeys (data3d, origin, rootDir) {\n  \n  var i, l, i2, l2, m, materialKeys = data3d.materialKeys || Object.keys(data3d.materials || {}), texturePathKey\n\n  for (i = 0, l = materialKeys.length; i < l; i++) {\n    m = data3d.materials[materialKeys[i]]\n\n    // hi-res textures\n    for (i2 = 0, l2 = TEXTURE_PATH_KEYS.length; i2 < l2; i2++) {\n      texturePathKey = TEXTURE_PATH_KEYS[i2]\n      if (m[texturePathKey]) {\n        if (m[texturePathKey][0] === '/') {\n          // absolute path\n          m[texturePathKey] = origin + m[texturePathKey]\n        } else {\n          // relative path\n          m[texturePathKey] = origin + rootDir +'/'+ m[texturePathKey]\n        }\n      }\n    }\n\n  }\n\n}\n\nfunction mapArraysToBuffer (data3d, buffer, payloadByteOffset, url) {\n\n  var mesh, i, l, meshKeys = data3d.meshKeys || Object.keys(data3d.meshes || {})\n\n  for (i = 0, l = meshKeys.length; i < l; i++) {\n    mesh = data3d.meshes[meshKeys[i]]\n\n    // map arrays to meshes\n    if (mesh.positionsOffset !== undefined && mesh.positionsLength !== undefined) {\n      mesh.positions = new Float32Array(buffer, payloadByteOffset + mesh.positionsOffset * 4, mesh.positionsLength)\n      delete mesh.positionsOffset\n      delete mesh.positionsLength\n    }\n    if (mesh.normalsOffset !== undefined && mesh.normalsLength !== undefined) {\n      mesh.normals = new Float32Array(buffer, payloadByteOffset + mesh.normalsOffset * 4, mesh.normalsLength)\n      delete mesh.normalsOffset\n      delete mesh.normalsLength\n    }\n    if (mesh.uvsOffset !== undefined && mesh.uvsLength !== undefined) {\n      mesh.uvs = new Float32Array(buffer, payloadByteOffset + mesh.uvsOffset * 4, mesh.uvsLength)\n      delete mesh.uvsOffset\n      delete mesh.uvsLength\n    }\n    if (mesh.uvsLightmapOffset !== undefined && mesh.uvsLightmapLength !== undefined) {\n      mesh.uvsLightmap = new Float32Array(buffer, payloadByteOffset + mesh.uvsLightmapOffset * 4, mesh.uvsLightmapLength)\n      delete mesh.uvsLightmapOffset\n      delete mesh.uvsLightmapLength\n    }\n\n    // add cache key\n    if (url) mesh.cacheKey = url + ':' + meshKeys[i]\n\n  }\n\n}\n\nfunction traverseData3d (data3d, callback) {\n\n  callback(data3d)\n\n  if (data3d.children) {\n    for (var i = 0, l = data3d.children.length; i < l; i++) {\n      traverseData3d(data3d.children[i], callback)\n    }\n  }\n\n}","import fetch from '../io/fetch.js'\nimport decodeBuffer from './decode-buffer.js'\n\nexport default function loadData3d (url, options) {\n  return fetch(url, options).then(function(res){\n    return res.arrayBuffer()\n  }).then(function(buffer){\n    return decodeBuffer(buffer, { url: url })\n  })\n}","import runtime from '../core/runtime.js'\nimport loadData3d from '../utils/data3d/load.js'\n\n// constants\n\nvar CDN_DOMAIN = 'dnvf9esa6v418.cloudfront.net'\nvar BUCKET = 'archilogic-content-beta'\n\n// main\n\nexport default function getFromStore (key, options) {\n\n  // WIP: for now, assume that this is only being used for data3d\n  // TODO: use options.type or filename extension to specify loader\n  return loadData3d(convertKeyToUrl(key))\n\n}\n\n// helpers\n\nfunction convertKeyToUrl (key, options) {\n  // API\n  options = options || {}\n  var cdn = options.cdn !== undefined ? options.cdn : true\n  var encode = options.encode !== undefined ? options.encode : true\n  // check cache\n  // if (keyToUrlCache[ key + cdn + encode ]) {\n  //   return keyToUrlCache[ key + cdn + encode ]\n  // }\n  // internals\n  var url, processedKey = key\n  // remove leading slash\n  var startsWithSlash = /^\\/(.*)$/.exec(processedKey)\n  if (startsWithSlash) {\n    processedKey = startsWithSlash[1]\n  }\n  // encode key if containig special chars\n  if (encode && !/^[\\.\\-\\_\\/a-zA-Z0-9]+$/.test(processedKey)) {\n    processedKey = encodeURIComponent(processedKey)\n  }\n  // compose url\n  if (cdn) {\n    url = 'https://'+CDN_DOMAIN+'/' + processedKey\n  } else {\n    // http://s3-eu-west-1.amazonaws.com/<bucket-name>/<s3-key>\n    // http://<bucket-name>.s3-website-eu-west-1.amazonaws.com // has index.html functionality\n    // http://<bucket-name>.s3.amazon.com/<s3-key>\n    url = 'https://'+BUCKET+'.s3.amazonaws.com/' + processedKey\n  }\n  // add to cache\n  // keyToUrlCache[ key + cdn + encode ] = url\n  return url\n}","import callService  from '../utils/services/call.js'\nimport getFromStore from '../storage/get.js'\n\nexport default function getProduct (id) {\n  // FIMXE: use proper argument name\n  return callService('Product.read', { id:id }).then(function(productInfo){\n    return getFromStore(productInfo.fileKey).then(function(data3d){\n      productInfo.data3d = data3d\n      return productInfo\n    })\n  })\n}","/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2017 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.5.0\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./catch_filter\":7,\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.0\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\";\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }","import runtime from './runtime.js'\n\n// Promise API polyfill for IE11\nimport 'bluebird/js/browser/bluebird.js'\n\n// fetch API polyfill for old browsers\nimport 'whatwg-fetch'\n\nif (!console.time || !console.timeEnd) {\n  var timers = {}\n  console.time = function(key) {\n    timers[key] = new Date().getTime()\n  }\n  console.timeEnd = function(id) {\n    if (!timers[key]) return\n    console.log(key + ': ' + (new Date().getTime() - timers[key]) + 'ms')\n    delete timers[key]\n  }\n}\n\n// from https://raw.githubusercontent.com/mrdoob/three.js/dev/src/polyfills.js\n\nif (Number.EPSILON === undefined) {\n  Number.EPSILON = Math.pow(2, -52);\n}\n\nif (Number.isInteger === undefined) {\n  // Missing in IE\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n  Number.isInteger = function (value) {\n    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value\n  }\n}\n\nif (Math.sign === undefined) {\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n  Math.sign = function (x) {\n    return ( x < 0 ) ? -1 : ( x > 0 ) ? 1 : +x\n  }\n}\n\nif (Function.prototype.name === undefined) {\n  // Missing in IE\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\n  Object.defineProperty(Function.prototype, 'name', {\n    get: function () {\n      return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]\n    }\n  })\n}\n\nif (Object.assign === undefined) {\n  // Missing in IE\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n  (function () {\n    Object.assign = function (target) {\n      'use strict';\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert undefined or null to object')\n      }\n      var output = Object(target)\n      for (var index = 1; index < arguments.length; index++) {\n        var source = arguments[index]\n        if (source !== undefined && source !== null) {\n          for (var nextKey in source) {\n            if (Object.prototype.hasOwnProperty.call(source, nextKey)) {\n              output[nextKey] = source[nextKey]\n            }\n          }\n        }\n      }\n      return output\n    }\n  })()\n}","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","/*!\r\n * js-logger - http://github.com/jonnyreeves/js-logger\r\n * Jonny Reeves, http://jonnyreeves.co.uk/\r\n * js-logger may be freely distributed under the MIT license.\r\n */\r\n(function (global) {\r\n\t\"use strict\";\r\n\r\n\t// Top level module for the global, static logger instance.\r\n\tvar Logger = { };\r\n\r\n\t// For those that are at home that are keeping score.\r\n\tLogger.VERSION = \"1.3.0\";\r\n\r\n\t// Function which handles all incoming log messages.\r\n\tvar logHandler;\r\n\r\n\t// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.\r\n\tvar contextualLoggersByNameMap = {};\r\n\r\n\t// Polyfill for ES5's Function.bind.\r\n\tvar bind = function(scope, func) {\r\n\t\treturn function() {\r\n\t\t\treturn func.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\r\n\t// Super exciting object merger-matron 9000 adding another 100 bytes to your download.\r\n\tvar merge = function () {\r\n\t\tvar args = arguments, target = args[0], key, i;\r\n\t\tfor (i = 1; i < args.length; i++) {\r\n\t\t\tfor (key in args[i]) {\r\n\t\t\t\tif (!(key in target) && args[i].hasOwnProperty(key)) {\r\n\t\t\t\t\ttarget[key] = args[i][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t// Helper to define a logging level object; helps with optimisation.\r\n\tvar defineLogLevel = function(value, name) {\r\n\t\treturn { value: value, name: name };\r\n\t};\r\n\r\n\t// Predefined logging levels.\r\n\tLogger.DEBUG = defineLogLevel(1, 'DEBUG');\r\n\tLogger.INFO = defineLogLevel(2, 'INFO');\r\n\tLogger.TIME = defineLogLevel(3, 'TIME');\r\n\tLogger.WARN = defineLogLevel(4, 'WARN');\r\n\tLogger.ERROR = defineLogLevel(8, 'ERROR');\r\n\tLogger.OFF = defineLogLevel(99, 'OFF');\r\n\r\n\t// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently\r\n\t// of each other.\r\n\tvar ContextualLogger = function(defaultContext) {\r\n\t\tthis.context = defaultContext;\r\n\t\tthis.setLevel(defaultContext.filterLevel);\r\n\t\tthis.log = this.info;  // Convenience alias.\r\n\t};\r\n\r\n\tContextualLogger.prototype = {\r\n\t\t// Changes the current logging level for the logging instance.\r\n\t\tsetLevel: function (newLevel) {\r\n\t\t\t// Ensure the supplied Level object looks valid.\r\n\t\t\tif (newLevel && \"value\" in newLevel) {\r\n\t\t\t\tthis.context.filterLevel = newLevel;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Is the logger configured to output messages at the supplied level?\r\n\t\tenabledFor: function (lvl) {\r\n\t\t\tvar filterLevel = this.context.filterLevel;\r\n\t\t\treturn lvl.value >= filterLevel.value;\r\n\t\t},\r\n\r\n\t\tdebug: function () {\r\n\t\t\tthis.invoke(Logger.DEBUG, arguments);\r\n\t\t},\r\n\r\n\t\tinfo: function () {\r\n\t\t\tthis.invoke(Logger.INFO, arguments);\r\n\t\t},\r\n\r\n\t\twarn: function () {\r\n\t\t\tthis.invoke(Logger.WARN, arguments);\r\n\t\t},\r\n\r\n\t\terror: function () {\r\n\t\t\tthis.invoke(Logger.ERROR, arguments);\r\n\t\t},\r\n\r\n\t\ttime: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'start' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttimeEnd: function (label) {\r\n\t\t\tif (typeof label === 'string' && label.length > 0) {\r\n\t\t\t\tthis.invoke(Logger.TIME, [ label, 'end' ]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Invokes the logger callback if it's not being filtered.\r\n\t\tinvoke: function (level, msgArgs) {\r\n\t\t\tif (logHandler && this.enabledFor(level)) {\r\n\t\t\t\tlogHandler(msgArgs, merge({ level: level }, this.context));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Protected instance which all calls to the to level `Logger` module will be routed through.\r\n\tvar globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });\r\n\r\n\t// Configure the global Logger instance.\r\n\t(function() {\r\n\t\t// Shortcut for optimisers.\r\n\t\tvar L = Logger;\r\n\r\n\t\tL.enabledFor = bind(globalLogger, globalLogger.enabledFor);\r\n\t\tL.debug = bind(globalLogger, globalLogger.debug);\r\n\t\tL.time = bind(globalLogger, globalLogger.time);\r\n\t\tL.timeEnd = bind(globalLogger, globalLogger.timeEnd);\r\n\t\tL.info = bind(globalLogger, globalLogger.info);\r\n\t\tL.warn = bind(globalLogger, globalLogger.warn);\r\n\t\tL.error = bind(globalLogger, globalLogger.error);\r\n\r\n\t\t// Don't forget the convenience alias!\r\n\t\tL.log = L.info;\r\n\t}());\r\n\r\n\t// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments\r\n\t// object with the supplied log messages and the second being a context object which contains a hash of stateful\r\n\t// parameters which the logging function can consume.\r\n\tLogger.setHandler = function (func) {\r\n\t\tlogHandler = func;\r\n\t};\r\n\r\n\t// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.\r\n\t// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).\r\n\tLogger.setLevel = function(level) {\r\n\t\t// Set the globalLogger's level.\r\n\t\tglobalLogger.setLevel(level);\r\n\r\n\t\t// Apply this level to all registered contextual loggers.\r\n\t\tfor (var key in contextualLoggersByNameMap) {\r\n\t\t\tif (contextualLoggersByNameMap.hasOwnProperty(key)) {\r\n\t\t\t\tcontextualLoggersByNameMap[key].setLevel(level);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,\r\n\t// default context and log handler.\r\n\tLogger.get = function (name) {\r\n\t\t// All logger instances are cached so they can be configured ahead of use.\r\n\t\treturn contextualLoggersByNameMap[name] ||\r\n\t\t\t(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));\r\n\t};\r\n\r\n\t// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will\r\n\t// write to the window's console object (if present); the optional options object can be used to customise the\r\n\t// formatter used to format each log message.\r\n\tLogger.createDefaultHandler = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\toptions.formatter = options.formatter || function defaultMessageFormatter(messages, context) {\r\n\t\t\t// Prepend the logger's name to the log message for easy identification.\r\n\t\t\tif (context.name) {\r\n\t\t\t\tmessages.unshift(\"[\" + context.name + \"]\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments\r\n\t\t// that don't offer a native console method.\r\n\t\tvar timerStartTimeByLabelMap = {};\r\n\r\n\t\t// Support for IE8+ (and other, slightly more sane environments)\r\n\t\tvar invokeConsoleMethod = function (hdlr, messages) {\r\n\t\t\tFunction.prototype.apply.call(hdlr, console, messages);\r\n\t\t};\r\n\r\n\t\t// Check for the presence of a logger.\r\n\t\tif (typeof console === \"undefined\") {\r\n\t\t\treturn function () { /* no console */ };\r\n\t\t}\r\n\r\n\t\treturn function(messages, context) {\r\n\t\t\t// Convert arguments object to Array.\r\n\t\t\tmessages = Array.prototype.slice.call(messages);\r\n\r\n\t\t\tvar hdlr = console.log;\r\n\t\t\tvar timerLabel;\r\n\r\n\t\t\tif (context.level === Logger.TIME) {\r\n\t\t\t\ttimerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];\r\n\r\n\t\t\t\tif (messages[1] === 'start') {\r\n\t\t\t\t\tif (console.time) {\r\n\t\t\t\t\t\tconsole.time(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttimerStartTimeByLabelMap[timerLabel] = new Date().getTime();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (console.timeEnd) {\r\n\t\t\t\t\t\tconsole.timeEnd(timerLabel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinvokeConsoleMethod(hdlr, [ timerLabel + ': ' +\r\n\t\t\t\t\t\t\t(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Delegate through to custom warn/error loggers if present on the console.\r\n\t\t\t\tif (context.level === Logger.WARN && console.warn) {\r\n\t\t\t\t\thdlr = console.warn;\r\n\t\t\t\t} else if (context.level === Logger.ERROR && console.error) {\r\n\t\t\t\t\thdlr = console.error;\r\n\t\t\t\t} else if (context.level === Logger.INFO && console.info) {\r\n\t\t\t\t\thdlr = console.info;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions.formatter(messages, context);\r\n\t\t\t\tinvokeConsoleMethod(hdlr, messages);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Configure and example a Default implementation which writes to the `window.console` (if present).  The\r\n\t// `options` hash can be used to configure the default logLevel and provide a custom message formatter.\r\n\tLogger.useDefaults = function(options) {\r\n\t\tLogger.setLevel(options && options.defaultLevel || Logger.DEBUG);\r\n\t\tLogger.setHandler(Logger.createDefaultHandler(options));\r\n\t};\r\n\r\n\t// Export to popular environments boilerplate.\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(Logger);\r\n\t}\r\n\telse if (typeof module !== 'undefined' && module.exports) {\r\n\t\tmodule.exports = Logger;\r\n\t}\r\n\telse {\r\n\t\tLogger._prevLogger = global.Logger;\r\n\r\n\t\tLogger.noConflict = function () {\r\n\t\t\tglobal.Logger = Logger._prevLogger;\r\n\t\t\treturn Logger;\r\n\t\t};\r\n\r\n\t\tglobal.Logger = Logger;\r\n\t}\r\n}(this));\r\n","import { name, version, homepage } from '../../package.json'\nimport Logger from 'js-logger'\nimport './polyfills.js'\nimport runtime from './runtime.js'\n\n// Bootstrap logger\nLogger.useDefaults()\n\n// print header to console in browser environment\n\nvar isBrowser = typeof window !== 'undefined' && Object.prototype.toString.call(window) === '[object Window]'\nif (isBrowser) {\n  console.log(name+' v'+version+'\\n'+homepage)\n}\n\n// global dependencies\n\n// three.js\nif (runtime.isNode) {\n  global.THREE = require('three')\n} else if (typeof THREE === 'undefined') {\n  throw new Error('Base query requires THREE.js library. Please add <script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/85/three.min.js\"></script> to your html file at top of <head> section.')\n}","import './core/polyfills.js'\nimport './core/bootstrap.js'\n\nimport runtime from './core/runtime.js'\n\nvar core = {\n  runtime: runtime\n}\n\nexport default core","var isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n","\"use strict\";\nvar util = require(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = require(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = require(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n","\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n","\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = require(\"./errors\").Warning;\nvar util = require(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (false ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n","\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = require(\"./util\");\nvar getKeys = require(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n","\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = require(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = require(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n","\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n","\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n","\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = require(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!false) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!false) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var $_len = arguments.length;var args = new Array($_len); for(var $_i = 0; $_i < $_len; ++$_i) {args[$_i] = arguments[$_i];};\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n","\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n","\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = require(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!false) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0)); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];};\n    if (!false) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n","\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = require(\"./util\");\n    var TypeError = require(\"./errors\").TypeError;\n    var inherits = require(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = require(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n","\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = require(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = require(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise) {\nvar util = require(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = require(\"./util\");\nvar nodebackForPromise = require(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = require(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!false) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n","\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util\");\nvar isObject = util.isObject;\nvar es5 = require(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n","\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n","\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n","\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = require(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n","\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = require(\"./util\");\nvar RangeError = require(\"./errors\").RangeError;\nvar AggregateError = require(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n","\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n","\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = require(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = require(\"./es5\");\nvar Async = require(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = require(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = require(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    require(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = require(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = require(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    require(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = require(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = require(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\nrequire(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\nrequire(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\nrequire(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\nrequire(\"./direct_resolve\")(Promise);\nrequire(\"./synchronous_inspection\")(Promise);\nrequire(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.0\";\nrequire('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\nrequire('./call_get.js')(Promise);\nrequire('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\nrequire('./timers.js')(Promise, INTERNAL, debug);\nrequire('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\nrequire('./nodeify.js')(Promise);\nrequire('./promisify.js')(Promise, INTERNAL);\nrequire('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\nrequire('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\nrequire('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\nrequire('./settle.js')(Promise, PromiseArray, debug);\nrequire('./some.js')(Promise, PromiseArray, apiRejection);\nrequire('./filter.js')(Promise, INTERNAL);\nrequire('./each.js')(Promise, INTERNAL);\nrequire('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n","import runtime from '../../core/runtime.js'\n\nvar FormData_\nif (runtime.isNode) {\n  FormData_ = require('form-data')\n} else if (typeof FormData !== 'undefined') {\n  FormData_ = FormData\n} else {\n  console.warn('Missing FormData API.')\n  FormData_ = function FormDataError () {\n    throw new Error('Missing FormData API.')\n  }\n}\n\nexport default FormData_","import runtime from '../../core/runtime.js'\n\nexport default (function(){\n\n  if (runtime.isNode) {\n    return require('node-fetch')\n  } else if (typeof fetch !== 'undefined') {\n    return fetch\n  } else {\n    console.warn('Missing global fetch API.')\n    return function() {\n      throw new Error('Missing global fetch API.')\n    }\n  }\n\n})()","var PATTERN = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i\n\n/**\n * Generate an UUID as specified in RFC4122\n */\n\nvar uuid = {}\n\nuuid.generate = function generateUuid () {\n  var d = Date.now()\n  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n  })\n  return uuid\n}\n\n/**\n * Validates UUID as specified in RFC4122\n */\n\nuuid.validate = function validateUuid (str) {\n  if (!str || typeof str !== \"string\") return false\n  return PATTERN.test(str)\n}\n\nexport default uuid","import Data3dView                   from './aframe/three/data3d-view.js'\nimport createFileDrop               from './aframe/ui/create-file-drop.js'\n\nvar aframe = {\n  three: {\n    Data3dView: Data3dView,\n  },\n  ui: {\n    createFileDrop: createFileDrop\n  }\n}\n\nexport default aframe","import get from './furniture/get.js'\n\nvar furniture = {\n  get: get\n}\n\nexport default furniture","import put from './storage/put.js'\nimport get from './storage/get.js'\n\nvar storage = {\n  get: get,\n  put: put\n}\n\nexport default storage","import core from './core.js'\r\nimport aFrame from './aframe.js'\r\nimport furniture from './furniture.js'\r\n// import scene from './scene.js'\r\nimport storage from './storage.js'\r\n\r\nvar IO3D = {\r\n\r\n  // products\r\n\r\n  aFrame: aFrame,\r\n  furniture: furniture,\r\n  // scene: scene,\r\n  storage: storage,\r\n\r\n  // others\r\n\r\n  runtime: core.runtime\r\n\r\n}\r\n\r\nexport default IO3D"]}